(this["webpackJsonpdynamic-form-react"]=this["webpackJsonpdynamic-form-react"]||[]).push([[0],{203:function(e,t,a){e.exports=a(382)},208:function(e,t,a){},209:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},354:function(e,t,a){},382:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(12),c=a.n(r),i=(a(208),a(209),a(77)),o=a(11),u=a(20),s=a(391),d=a(41),m=a(395),f=a(390),p=a(196),b=a(26),v=a(4),E=l.a.createContext(null);function g(e,t,a,n){var l=t.split("."),r=l[0];!function e(t){if(t.lanes){var c,i=Object(b.a)(t.lanes);try{for(i.s();!(c=i.n()).done;){var o,u=c.value,s=Object(b.a)(u.cellDataList);try{for(s.s();!(o=s.n()).done;){var d=o.value;switch(d.type){case"grid":case"tab":e(d);break;default:if(d.id===r){if("list"!==d.type)return d[a]=n,!0;var m,f=parseInt(l[1]),p=l[2],v=d.lanes[f],E=Object(b.a)(v.cellDataList);try{for(E.s();!(m=E.n()).done;){var g=m.value;if(g.id===p)return g[a]=n,!0}}catch(y){E.e(y)}finally{E.f()}}}}}catch(y){s.e(y)}finally{s.f()}}}catch(y){i.e(y)}finally{i.f()}}return!1}(e)}function y(e){var t=JSON.parse(JSON.stringify(e));return j(e,(function(e){j(t,(function(t){t.id===e.id&&("function"===typeof e.required&&(t.required=e.required),e.onChange&&(t.onChange=e.onChange),e.onClick&&(t.onClick=e.onClick))}))})),t}function O(e,t){var a=y(e);return j(a,t),a}function j(e,t){t(e,null,null),function e(a){if(a.lanes){var n,l=Object(b.a)(a.lanes);try{for(l.s();!(n=l.n()).done;)for(var r=n.value,c=0;c<r.cellDataList.length;c++){var i=r.cellDataList[c];t(i,c,r.cellDataList),"grid"!==i.type&&"list"!==i.type&&"tab"!==i.type||e(i)}}catch(o){l.e(o)}finally{l.f()}}}(e)}function h(e,t){var a=null;return function e(n){if(n.lanes){var l,r=Object(b.a)(n.lanes);try{for(r.s();!(l=r.n()).done;)for(var c=l.value,i=0;i<c.cellDataList.length;i++){var o=c.cellDataList[i];if(t(o,i,c.cellDataList)){var u;a=[{parentId:n.id,laneIndex:null===(u=n.lanes)||void 0===u?void 0:u.indexOf(c),index:i},c.cellDataList,o];break}"grid"!==o.type&&"list"!==o.type&&"tab"!==o.type||e(o)}}catch(s){r.e(s)}finally{r.f()}}return a}(e)}function C(e,t,a){var n=null;return function e(l){if(l.id===t)return l.lanes[a].cellDataList;if(l.lanes){var r,c=Object(b.a)(l.lanes);try{for(c.s();!(r=c.n()).done;){var i,o=r.value,u=Object(b.a)(o.cellDataList);try{for(u.s();!(i=u.n()).done;){var s=i.value;"grid"!==s.type&&"list"!==s.type&&"tab"!==s.type||(s.id===t?n=s.lanes[a].cellDataList:e(s))}}catch(d){u.e(d)}finally{u.f()}}}catch(d){c.e(d)}finally{c.f()}}return n}(e)}function w(e,t,a,n){var l=h(e,(function(e){return e.id===a})),r=Object(o.a)(l,2),c=r[0],i=r[1];"up"===n?i.splice(c.index,0,t):i.splice(c.index+1,0,t),x(e,t.id)}function D(e,t){if(!t.type)return e;if("INIT"===t.type)return t.data;var a=y(e);if("POSITIONED_MOVE"===t.type){var n=h(a,(function(e){return e.id===t.id})),l=Object(o.a)(n,3),r=l[0],c=l[1],i=l[2];h(a,(function(e){return e.id===t.dropItemId}))&&(c.splice(r.index,1),w(a,i,t.dropItemId,t.position))}else if("POSITIONED_ADD"===t.type){h(a,(function(e){return e.id===t.dropItemId}))&&w(a,t.dragItem,t.dropItemId,t.position)}else if("ADD"===t.type){C(a,t.location.parentId,t.location.index).push(t.dragItem),x(a,t.dragItem.id)}else if("UPDATE"===t.type){var u=h(a,(function(e){return e.id===t.data.id})),s=Object(o.a)(u,2),d=s[0];s[1].splice(d.index,1,t.data)}else if("MOVE"===t.type){var m=h(a,(function(e){return e.id===t.id})),f=Object(o.a)(m,3),p=f[0],b=f[1],v=f[2];b.splice(p.index,1);var E=C(a,t.location.parentId,t.location.index);null===E||void 0===E||E.push(v),x(a,v.id)}else if("DELETE"===t.type){var j=h(a,(function(e){return e.id===t.id})),D=Object(o.a)(j,2),I=D[0];D[1].splice(I.index,1)}else if("ACTIVE"===t.type)x(a,t.id);else if("DELETE_ACTIVE"===t.type)!function(e){var t=h(e,(function(e){return void 0!==e.active&&e.active}));if(t){var a=Object(o.a)(t,2),n=a[0];a[1].splice(n.index,1)}}(a);else if("SET"===t.type)g(a,t.targetId,t.key,t.value);else if("SET_VALUE"===t.type)g(a,t.targetId,"value",t.value);else if("SET_OPTION"===t.type)g(a,t.targetId,"options",t.options);else if("VALIDATE"===t.type)return O(e,(function(e){("function"===typeof e.required?!e.required():e.required&&(!e.value||e.value instanceof Array&&0===e.value.length))?(e.warning="".concat(e.label," is required."),e.warnable=!0):(e.warnable=!1,e.warning="")}));return a}function x(e,t){j(e,(function(e){e.active=t===e.id}))}function I(e){var t={type:e,id:e+(new Date).getTime(),active:!1,label:e};return"grid"===t.type?t.lanes=[{span:12,cellDataList:[]},{span:12,cellDataList:[]}]:"tab"===t.type?(t.lanes=[{span:24,cellDataList:[]},{span:0,cellDataList:[]}],t.tabs=["Tab 1","Tab 2"]):"list"===t.type&&(t.label="List",t.lanes=[{cellDataList:[],span:100}]),t}var k=a(16),T=[{name:"Basic",widgets:[{type:"input",icon:l.a.createElement(k.d,null),name:"Input"},{type:"textarea",icon:l.a.createElement(k.d,null),name:"Textarea"},{type:"select",icon:l.a.createElement(k.c,null),name:"Select"},{type:"datetime",icon:l.a.createElement(k.a,null),name:"Datepicker"},{type:"checkbox",icon:l.a.createElement(k.b,null),name:"Checkbox"},{type:"label",icon:l.a.createElement(k.e,null),name:"Label"}]},{name:"Layout",widgets:[{type:"grid",icon:l.a.createElement(k.i,null),name:"Grid"},{type:"tab",icon:l.a.createElement(k.i,null),name:"Tab"},{type:"list",icon:l.a.createElement(k.h,null),name:"List"}]}],A=a(401),L=a(402),P=a(387),R=a(388),q=a(21),F=a(8),U=a.n(F),N=a(404);function S(e,t){return{setValue:Object(n.useCallback)((function(t,a){e({type:"SET_VALUE",targetId:t,value:a})}),[e]),setOption:Object(n.useCallback)((function(t,a){e({type:"SET_OPTION",options:a,targetId:t})}),[e]),getValue:Object(n.useCallback)((function(e){return function(e,t){var a=null,n=t.split("."),l=n[0];return function e(t){if(t.lanes){var r,c=Object(b.a)(t.lanes);try{for(c.s();!(r=c.n()).done;){var i,o=r.value,u=Object(b.a)(o.cellDataList);try{for(u.s();!(i=u.n()).done;){var s=i.value;switch(s.type){case"grid":case"tab":e(s);break;default:if(s.id===l){if("list"!==s.type)return a=s.value,!0;if(3===n.length){var d,m=parseInt(n[1]),f=n[2],p=s.lanes[m],v=Object(b.a)(p.cellDataList);try{for(v.s();!(d=v.n()).done;){var E=d.value;if(E.id===f)return a=E.value,!0}}catch(y){v.e(y)}finally{v.f()}}else{var g=function(){a=[];var e,t=n[1],l=Object(b.a)(s.lanes);try{for(l.s();!(e=l.n()).done;){var r,c=e.value,i=Object(b.a)(c.cellDataList.filter((function(e){return e.id===t})));try{for(i.s();!(r=i.n()).done;){var o=r.value;a.push(o.value)}}catch(y){i.e(y)}finally{i.f()}}}catch(y){l.e(y)}finally{l.f()}return{v:!0}}();if("object"===typeof g)return g.v}}}}}catch(y){u.e(y)}finally{u.f()}}}catch(y){c.e(y)}finally{c.f()}}return!1}(e),a}(t,e)}),[t]),set:Object(n.useCallback)((function(t,a,n){e({type:"SET",targetId:t,key:a,value:n})}),[e])}}var $=l.a.createContext(null),V=Object(n.forwardRef)((function(e,t){var a=e.data,r=e.customCells,c=Object(n.useReducer)(D,a),i=Object(o.a)(c,2),u=i[0],s=i[1];Object(n.useImperativeHandle)(t,(function(){return{getData:function(){return function(e){var t={};return function e(a){a.lanes&&a.lanes.forEach((function(a){a.cellDataList.forEach((function(a){switch(a.type){case"grid":e(a);break;case"list":t[a.id]=[],a.lanes.forEach((function(e){var n={};e.cellDataList.forEach((function(e){n[e.id]=e.value})),n=Object(v.a)(Object(v.a)({},n),e.hiddenValues),t[a.id].push(n)}));break;default:t[a.id]=a.value}})),t=Object(v.a)(Object(v.a)({},t),a.hiddenValues)}))}(e),t}(u)},validate:function(){s({type:"VALIDATE"});var e=[];return j(u,(function(t){t.required&&!t.value&&e.push({id:t.id,message:"".concat(t.label,"\u4e0d\u80fd\u4e3a\u7a7a"),value:t.value,description:"required"})})),e}}}));var d=S(s,u);return Object(N.a)((function(){s({type:"INIT",data:a})}),[a]),l.a.createElement($.Provider,{value:s},l.a.createElement(E.Provider,{value:d},l.a.createElement(te,{ref:t,cellData:u,className:"preview",customCells:r})))})),z=Object(n.forwardRef)((function(e,t){var a=e.cellDataList,r=e.direction,c=e.className,i=e.span,o=void 0===i?24:i,u=e.customCells,s=e.location,d=Object(n.useContext)($),m=Object(n.useMemo)((function(){return a.map((function(e,t){var a={location:s,key:e.id,layout:r,cellData:e,customCells:u,style:{width:e.width}};return null===d?l.a.createElement(ne,Object.assign({},a,{index:t})):l.a.createElement(te,a)}))}),[a,u,r,d,s]);return l.a.createElement(P.a,{span:o,className:"lane ".concat(r).concat(c||"")},l.a.createElement("div",{style:{width:"100%",minHeight:42,height:"100%"},ref:t},m))})),M=function(e){var t=e.cellDataList,a=e.direction,r=e.location,c=e.span,u=void 0===c?24:c,s=e.customCells,d=Object(n.useContext)(Fe),m=Object(A.a)({accept:["input","grid","textarea","select","datetime","checkbox","list","instance","label","tab"].concat(Object(i.a)((s||[]).map((function(e){return e.type})))),drop:function(e,t){if(p){if(!t.getClientOffset())return;if("instance"===e.type)d({type:"MOVE",id:e.id,location:r});else{var a=null;if(s){var n=s.find((function(t){return t.type===e.type}));n&&n.createWidgetInstance&&(a=n.createWidgetInstance())}a||(a=I(e.type)),d({type:"ADD",dragItem:a,location:r})}}},collect:function(e){var t=e.isOver({shallow:!0});return t&&e.getItem().id===r.parentId&&(t=!1),{isOver:t}}}),f=Object(o.a)(m,2),p=f[0].isOver,b=f[1];return l.a.createElement(z,{location:r,span:u,cellDataList:t,className:p?" hovered":"",ref:b,direction:a,customCells:s})},W=(a(212),a(213),Object(n.forwardRef)((function(e,t){var a=e.layout,r=void 0===a?"horizontal":a,c=e.required,i=void 0!==c&&c,o=e.warning,u=void 0===o?null:o,s=e.warnable,d=void 0===s||s,m=e.label,f=void 0===m?l.a.createElement(l.a.Fragment,null):m,p=e.element,b=Object(n.useContext)($);return l.a.createElement("table",{ref:t,className:["form-group",r].join(" ")},l.a.createElement("tbody",null,"horizontal"===r?l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",{className:"label"},i?l.a.createElement("span",{className:"required"},"*"):l.a.createElement(l.a.Fragment,null),f),l.a.createElement("td",{className:"element"},p)),d?l.a.createElement("tr",null,l.a.createElement("td",null),l.a.createElement("td",{className:"warning"},u?l.a.createElement("span",null,u):l.a.createElement("span",null,"\xa0"))):l.a.createElement(l.a.Fragment,null)):l.a.createElement(l.a.Fragment,null,!b&&l.a.createElement("tr",null,l.a.createElement("td",{className:"label"},i?l.a.createElement("span",{className:"required"},"*"):l.a.createElement(l.a.Fragment,null),f)),l.a.createElement("tr",null,l.a.createElement("td",{className:"element"},p)),d?l.a.createElement("tr",null,l.a.createElement("td",{className:"warning"},u?l.a.createElement("span",null,u):l.a.createElement("span",null,"\xa0"))):l.a.createElement(l.a.Fragment,null))))})));function _(){var e=Object(u.a)(["\n  padding: 0 10px;\n  white-space: nowrap;\n  width: 100%;\n  overflow-x: auto;\n\n  > div {\n    width: 200px;\n    display: inline-block;\n  }\n"]);return _=function(){return e},e}var B=Object(q.a)(P.a)(_()),H=Object(n.forwardRef)((function(e,t){var a=e.direction,r=void 0===a?"horizontal":a,c=e.cellData,i=e.customCells,o=Object(n.useContext)($),u=null===o,s=Object(n.useCallback)((function(e,t){var a={key:"".concat(c.id,"-").concat(t),direction:r,cellDataList:e.cellDataList,location:{parentId:c.id,index:t},span:e.span,customCells:i};return u?l.a.createElement(M,a):l.a.createElement(z,a)}),[c.id,i,r,u]),m=Object(n.useMemo)((function(){return c.lanes.map((function(e,t){return s(e,t)}))}),[c.lanes,s]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{ref:t,className:"lanes"},"horizontal"===r?l.a.createElement(l.a.Fragment,null,m):l.a.createElement(W,{required:!!c.required,warning:c.warning,warnable:c.warnable,element:l.a.createElement(l.a.Fragment,null,!u&&l.a.createElement(B,{span:24},c.lanes[0].cellDataList.map((function(e){return l.a.createElement("div",{style:{width:e.width}},e.required&&l.a.createElement("span",{style:{color:"red"}},"*"),l.a.createElement("span",null,e.label))}))),m,!u&&"vertical"===r&&l.a.createElement(d.a,{size:"small",onClick:function(){return o({type:"UPDATE",data:U()(c,{lanes:{$push:[U()(c.lanes[0],{cellDataList:{$apply:function(e){return e.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{value:null})}))}},hiddenValues:{$apply:function(){return{}}}})]}})})},type:"link"},"Add")),label:l.a.createElement("span",null,c.label)})))})),J=Object(n.forwardRef)((function(e,t){var a=e.data,n=e.direction,r=e.customCells;return l.a.createElement(l.a.Fragment,null,l.a.createElement(H,{ref:t,cellData:a,direction:n,customCells:r}))}));function Y(){var e=Object(u.a)(["\n  border-bottom: 1px solid #d3d3d3;\n"]);return Y=function(){return e},e}function G(){var e=Object(u.a)(["\n  border-bottom: 2px solid #1890ff;\n  color: #1890ff;\n"]);return G=function(){return e},e}function K(){var e=Object(u.a)(["\n  display: inline-block;\n  padding: 10px 20px;\n  font-weight: bold;\n  min-width: 40px;\n  text-align: center;\n  cursor: pointer;\n"]);return K=function(){return e},e}var Q=Object(q.a)("div")(K()),X=Object(q.a)(Q)(G()),Z=Object(q.a)("div")(Y()),ee=Object(n.forwardRef)((function(e,t){var a,r=e.data,c=e.customCells,i=Object(n.useContext)(Fe),u=Object(n.useContext)($),s=null===u?i:u,d=Object(n.useState)(r.lanes.findIndex((function(e){return 24===e.span}))),m=Object(o.a)(d,2),f=m[0],p=m[1],b=Object(n.useCallback)((function(e){p(e),s({type:"UPDATE",data:U()(r,{lanes:{$apply:function(t){return(t||[]).map((function(t){var a;return Object(v.a)(Object(v.a)({},t),{},{span:(null===(a=r.lanes)||void 0===a?void 0:a.indexOf(t))===e?24:0})}))}}})})}),[r,s]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Z,null,null===(a=r.lanes)||void 0===a?void 0:a.map((function(e,t){return t===f?l.a.createElement(X,null,r.tabs[t]):l.a.createElement(Q,{onClick:function(){return b(t)}},r.tabs[t])}))),l.a.createElement(H,{cellData:r,customCells:c}))})),te=Object(n.forwardRef)((function(e,t){var a=e.cellData,r=e.layout,c=void 0===r?"horizontal":r,i=e.style,o=e.onClick,u=e.className,s=e.customCells,d=e.children,m=e.location,f=Object(n.useContext)($),p=Object(n.useContext)(Fe),b=Object(n.useMemo)((function(){return Object(v.a)({required:!1,warnable:!1,layout:"default",labeled:!0},a)}),[a]),g=Object(n.useContext)(E),y=Object(n.useCallback)((function(e,t){var a,n={type:"SET_VALUE",targetId:m&&"vertical"===c?"".concat(m.parentId,".").concat(m.index,".").concat(b.id):b.id,value:e};f?f(n):p(n);var l={};null===(a=b.onChange)||void 0===a||a.call(b,e,Object(v.a)(Object(v.a)({},g),{},{getValue:function(e){for(var t in l)if(l.hasOwnProperty(t)){var a=l[t];if(e===t)return a;var n=t.split(".");if(3===n.length&&e==="".concat(n[0],".").concat(n[2])){var r=g.getValue(e);return r.splice(parseInt(n[1]),1,a),r}}return g.getValue(e)},setValue:function(e,t){l[e]=t,g.setValue(e,t)}}),t,m)}),[b.id,b.onChange,p,f,g,c,m]),O=Object(n.useMemo)((function(){return{onChange:y,data:b,layout:c}}),[b,c,y]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{ref:t,style:Object(v.a)(Object(v.a)({},i),{},{position:"relative"}),className:"instance ".concat(!f&&b.active?" active ":" ").concat(u||""),onClick:o},d,"grid"===b.type?l.a.createElement(J,{data:b,customCells:s}):"list"===b.type?l.a.createElement(J,{data:b,direction:"vertical",customCells:s}):"tab"===b.type?l.a.createElement(ee,Object.assign({},O,{customCells:s})):s&&s.some((function(e){return e.type===b.type}))&&l.a.createElement(s.filter((function(e){return e.type===b.type}))[0].cell,O)||l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"Not found: ".concat(b.type," of ").concat(null===s||void 0===s?void 0:s.map((function(e){return e.type})).join(", "))))))})),ae=a(397),ne=function(e){var t=e.cellData,a=e.index,r=e.layout,c=void 0===r?"horizontal":r,u=e.className,s=e.customCells,d=e.location,m=e.style,f=Object(v.a)({required:!1,warnable:!1,layout:"default",labeled:!0},t),p=Object(n.useRef)(null),b=Object(n.useContext)(Fe),E=Object(n.useState)(""),g=Object(o.a)(E,2),y=g[0],O=g[1],j=Object(A.a)({accept:["instance","input","textarea","select","checkbox","datetime","grid","list","label","tab"].concat(Object(i.a)((s||[]).map((function(e){return e.type})))),hover:function(e,a){if(p.current&&a.isOver({shallow:!0})&&a.getItem().id!==t.id&&a.getClientOffset()){var n=p.current.getBoundingClientRect(),l=a.getClientOffset();if("horizontal"===c){var r=(n.bottom-n.top)/2,i=l.y-n.top;O(i>r?" drop-over-downward":" drop-over-upward")}else{var o=(n.right-n.left)/2,u=l.x-n.left;O(u>o?" drop-over-rightward":" drop-over-leftward")}}else O("")},collect:function(e){return{isOver:e.isOver({shallow:!0})}},drop:function(e,a){if(p.current&&a.isOver({shallow:!0})){var n,l=p.current.getBoundingClientRect(),r=a.getClientOffset();if(r){if("horizontal"===c){var i=(l.bottom-l.top)/2;n=r.y-l.top>i?"down":"up"}else{var o=(l.right-l.left)/2;n=r.x-l.left>o?"down":"up"}if("instance"===e.type)b({type:"POSITIONED_MOVE",id:a.getItem().id,position:n,dropItemId:t.id});else{var u=null;if(s){var d=s.find((function(t){return t.type===e.type}));d&&d.createWidgetInstance&&(u=d.createWidgetInstance())}u||(u=I(e.type)),b({type:"POSITIONED_ADD",position:n,dropItemId:t.id,dragItem:u})}}}}}),h=Object(o.a)(j,2),C=h[0].isOver,w=h[1],D=Object(L.a)({item:{type:"instance",id:t.id,index:a},collect:function(e){return{isDragging:!!e.isDragging()}},begin:function(){b({type:"ACTIVE",id:t.id})}}),x=Object(o.a)(D,2),k=x[0].isDragging;return(0,x[1])(w(p)),l.a.createElement(l.a.Fragment,null,l.a.createElement(te,{location:d,customCells:s,className:"".concat(C?y:""," ").concat(u||""),onClick:function(e){e.stopPropagation(),b({type:"ACTIVE",id:t.id}),b({type:"EDIT",id:t.id})},ref:p,style:Object(v.a)({opacity:k?"0.5":1},m),cellData:f,layout:c},f.active?l.a.createElement("div",{style:{position:"absolute",top:0,right:"4px",zIndex:1}},l.a.createElement(ae.a,{style:{cursor:"pointer"},onClick:function(){return b({type:"DELETE",id:t.id})}})):void 0))},le=a(38),re=a(403);function ce(e){var t=e.index,a=e.data,r=e.move,c=e.onRemove,i=e.onResize,u=Object(n.useRef)(null),s=Object(L.a)({item:{type:"config",index:t},collect:function(e){return{isDragging:e.isDragging()}}}),m=Object(o.a)(s,2)[1],f=Object(A.a)({accept:"config",hover:function(e,a){if(u.current){var n=e.index,l=t;if(n!==l){var c=u.current.getBoundingClientRect(),i=(c.bottom-c.top)/2,o=a.getClientOffset().y-c.top;n<l&&o<i||n>l&&o>i||(r(n,l),e.index=l)}}}});return m((0,Object(o.a)(f,2)[1])(u)),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{ref:u},l.a.createElement(k.f,{style:{cursor:"move"}}),l.a.createElement(re.a,{onChange:i,value:a.span,size:"small",style:{width:"160px",margin:"0 4px"}}),l.a.createElement(d.a,{type:"link",onClick:c,style:{padding:"0"}},l.a.createElement(k.g,null))))}var ie=a(396);function oe(e){var t=e.data,a=Object(n.useContext)(Fe);return l.a.createElement(ie.a,{labelCol:{span:8}},l.a.createElement(ie.a.Item,{label:"\u5217"},l.a.createElement(l.a.Fragment,null,t&&t.lanes&&t.lanes.map((function(e,n){return l.a.createElement(ce,{key:"lane-config-"+n,index:n,data:e,onResize:function(e){var l="string"!==typeof e&&e?e:0;a({type:"UPDATE",data:Object(v.a)(Object(v.a)({},t),{},{lanes:U()(t.lanes,Object(le.a)({},n,{span:{$set:l}}))})})},onRemove:function(){a({type:"UPDATE",data:Object(v.a)(Object(v.a)({},t),{},{lanes:U()(t.lanes,{$splice:[[n,1]]})})})},move:function(e,n){var l,r=null===(l=t.lanes)||void 0===l?void 0:l[e];a({type:"UPDATE",data:Object(v.a)(Object(v.a)({},t),{},{lanes:U()(t.lanes,{$splice:[[e,1],[n,0,r]]})})})}})})),l.a.createElement(d.a,{type:"link",onClick:function(){var e=Object(v.a)({},t);e.lanes.push({cellDataList:[],span:12}),a({type:"UPDATE",data:e})}},"\u6dfb\u52a0\u5217"))))}function ue(){var e=Object(u.a)(["\n  font-size: 14px;\n  box-sizing: border-box;\n  width: 125px;\n  display: inline-block;\n  cursor: move;\n  border: 1px solid #a3a3a3;\n  padding: 5px 10px;\n  margin: 2px;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  background-color: white;\n\n  > * {\n    margin-right: 4px;\n    vertical-align: middle;\n  }\n"]);return ue=function(){return e},e}var se=q.a.li(ue());function de(e){var t=e.widget,a=Object(L.a)({item:{type:t.type},collect:function(e){return{isDragging:!!e.isDragging()}}}),n=Object(o.a)(a,2),r=n[0].isDragging,c=n[1];return l.a.createElement(se,{key:t.name,style:{opacity:r?"0.5":1},ref:c},t.icon,l.a.createElement("span",null,t.name))}var me=function(e){var t=e.name,a=e.list;return l.a.createElement(l.a.Fragment,null,l.a.createElement(n.Fragment,{key:t},l.a.createElement("div",null,t),l.a.createElement("ul",{style:{width:"100%",listStyle:"none",padding:0}},a.map((function(e){return l.a.createElement(de,{key:e.name,widget:e})})))))},fe=a(398);function pe(e){var t=e.data,a=Object(n.useContext)(Fe);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ie.a,{labelCol:{span:8}},l.a.createElement(ie.a.Item,{label:"Title"},l.a.createElement(fe.a,{value:t.label,onChange:function(e){a({type:"UPDATE",data:U()(t,{label:{$set:e.target.value}})})}}))))}var be=a(399);function ve(){var e=Object(u.a)(["\n  background-color: white;\n"]);return ve=function(){return e},e}function Ee(){var e=Object(u.a)(["\n  background-color: white;\n"]);return Ee=function(){return e},e}function ge(){var e=Object(u.a)(["\n  background-color: white;\n"]);return ge=function(){return e},e}function ye(){var e=Object(u.a)(["\n  background-color: white;\n"]);return ye=function(){return e},e}var Oe=be.a.Header,je=be.a.Sider,he=be.a.Content,Ce=Object(q.a)(be.a)(ye()),we=Object(q.a)(Oe)(ge()),De=Object(q.a)(je)(Ee()),xe=Object(q.a)(he)(ve()),Ie=a(389);function ke(e){var t=e.data,a=Object(n.useContext)(Fe),r=Object(v.a)({},t);return r.label=r.label||"\u81ea\u5b9a\u4e49\u63a7\u4ef6",l.a.createElement(l.a.Fragment,null,l.a.createElement(ie.a,{labelCol:{span:8}},l.a.createElement(ie.a.Item,{label:"Title"},l.a.createElement(fe.a,{value:r.label,onChange:function(e){a({type:"UPDATE",data:U()(r,{label:{$set:e.target.value}})})}})),l.a.createElement(ie.a.Item,{label:"Required"},l.a.createElement(Ie.a,{checked:!!r.required,onChange:function(e){a({type:"UPDATE",data:U()(r,{required:{$set:e}})})}})),l.a.createElement(ie.a.Item,{label:"Readonly"},l.a.createElement(Ie.a,{checked:r.disabled,onChange:function(e){a({type:"UPDATE",data:U()(r,{disabled:{$set:e}})})}})),l.a.createElement(ie.a.Item,{label:"Default"},l.a.createElement(fe.a,{value:r.defaultValue,onChange:function(e){a({type:"UPDATE",data:U()(r,{defaultValue:{$set:e.target.value}})})}}))))}function Te(e){var t=e.index,a=e.name,r=e.move,c=e.onRemove,i=e.onRename,u=Object(n.useRef)(null),s=Object(L.a)({item:{type:"config",index:t},collect:function(e){return{isDragging:e.isDragging()}}}),m=Object(o.a)(s,2)[1],f=Object(A.a)({accept:"config",hover:function(e,a){if(u.current){var n=e.index,l=t;if(n!==l){var c=u.current.getBoundingClientRect(),i=(c.bottom-c.top)/2,o=a.getClientOffset().y-c.top;n<l&&o<i||n>l&&o>i||(r(n,l),e.index=l)}}}});return m((0,Object(o.a)(f,2)[1])(u)),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{ref:u},l.a.createElement(k.f,{style:{cursor:"move"}}),l.a.createElement(fe.a,{onChange:function(e){return i(e.target.value)},value:a,size:"small",style:{width:"160px",margin:"0 4px"}}),l.a.createElement(d.a,{type:"link",onClick:c,style:{padding:"0"}},l.a.createElement(k.g,null))))}function Ae(e){var t=e.data,a=Object(n.useContext)(Fe);return l.a.createElement(ie.a,{labelCol:{span:8}},l.a.createElement(ie.a.Item,{label:"\u9009\u9879\u5361"},l.a.createElement(l.a.Fragment,null,t&&t.tabs&&t.tabs.map((function(e,n){return l.a.createElement(Te,{key:"tab-config-"+n,index:n,name:e,onRename:function(e){a({type:"UPDATE",data:Object(v.a)(Object(v.a)({},t),{},{tabs:U()(t.tabs,Object(le.a)({},n,{$set:e}))})})},onRemove:function(){a({type:"UPDATE",data:Object(v.a)(Object(v.a)({},t),{},{tabs:U()(t.tabs,{$splice:[[n,1]]}),lanes:U()(t.lanes,{$splice:[[n,1]]})})})},move:function(e,n){var l=t.tabs[e];a({type:"UPDATE",data:Object(v.a)(Object(v.a)({},t),{},{tabs:U()(t.tabs,{$splice:[[e,1],[n,0,l]]}),lanes:U()(t.lanes,{$splice:[[e,1],[n,0,t.lanes[e]]]})})})}})})),l.a.createElement(d.a,{type:"link",onClick:function(){var e,n=Object(v.a)({},t);n.lanes.push({cellDataList:[],span:0}),null===(e=n.tabs)||void 0===e||e.push("\u65b0\u9009\u9879\u5361"),a({type:"UPDATE",data:n})}},"\u6dfb\u52a0\u5217"))))}a(354);function Le(){var e=Object(u.a)(["\n  padding: 0 10px;\n  text-align: right;\n  border-bottom: 1px solid #a3a3a3;\n"]);return Le=function(){return e},e}function Pe(){var e=Object(u.a)(["\n  border: 1px solid #d3d3d3;\n  height: calc(100% - 1px);\n"]);return Pe=function(){return e},e}function Re(){var e=Object(u.a)(["\n  padding: 10px;\n  border-right: 1px solid #d3d3d3;\n"]);return Re=function(){return e},e}var qe={type:"grid",id:"11270307",lanes:[{span:24,cellDataList:[]}],active:!1},Fe=l.a.createContext({}),Ue=Object(q.a)(De).attrs({width:280})(Re()),Ne=Object(q.a)(Ce)(Pe()),Se=Object(q.a)(we)(Le()),$e=Object(n.forwardRef)((function(e,t){var a=e.customCells,r=e.availableCustomCells,c=e.toolbar,u=void 0===c||c,b=e.defaultCellData,v=e.builtinCellDataTypes,g=e.onChange,j=e.style,C=Object(n.useReducer)(D,b||qe),w=Object(o.a)(C,2),x=w[0],I=w[1],A=Object(n.useState)(!1),L=Object(o.a)(A,2),P=L[0],R=L[1],q=Object(n.useState)(null),F=Object(o.a)(q,2),U=F[0],N=F[1],$=Object(n.useRef)(),z=Object(n.useCallback)((function(e){(46===e.keyCode||e.ctrlKey&&8===e.keyCode)&&I({type:"DELETE_ACTIVE"})}),[]),M=Object(n.useMemo)((function(){return r||a}),[r,a]);Object(n.useEffect)((function(){return document.addEventListener("keyup",z,!1),function(){return document.removeEventListener("keyup",z,!1)}}),[z]),Object(n.useEffect)((function(){return null===g||void 0===g?void 0:g(x)}),[x,g]),Object(n.useImperativeHandle)(t,(function(){return{preview:function(){R(!0),N(y(x))},reset:function(){I({type:"INIT",data:qe})},load:function(e){I({type:"INIT",data:e})},get:function(){return O(x,(function(e){return e.value=void 0}))}}}));var W=function(e){var t=h(e,(function(e){return void 0!==e.active&&e.active}));return t?t[2]:null}(x),_=S(I,x),B=Object(n.useMemo)((function(){return v?T.map((function(e){return{name:e.name,widgets:e.widgets.filter((function(e){return v.indexOf(e.type)>-1}))}})).filter((function(e){return e.widgets.length>0})):T}),[v]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Fe.Provider,{value:I},l.a.createElement(E.Provider,{value:_},l.a.createElement(f.a,{backend:p.a},l.a.createElement(Ne,{style:j},l.a.createElement(Ue,null,B.map((function(e){return l.a.createElement(me,{key:e.name,name:e.name,list:e.widgets})})),M&&l.a.createElement(me,{key:"Custom",name:"Custom",list:Object(i.a)(M.map((function(e){return{type:e.type,name:e.name||"Custom",icon:e.icon||l.a.createElement(k.d,null)}})))})),l.a.createElement(xe,null,l.a.createElement(Ce,{style:{height:"100%"}},u&&l.a.createElement(Se,null,l.a.createElement(s.a,null,l.a.createElement(d.a,{onClick:function(){I({type:"INIT",data:qe})}},"Reset"),l.a.createElement(d.a,{onClick:function(){R(!0),N(y(x))}},"Preview"),l.a.createElement(d.a,{onClick:function(){return alert(JSON.stringify(x))}},"Save"))),l.a.createElement(xe,{style:{height:"100%",padding:10}},l.a.createElement(ne,{className:"root",cellData:x,index:0,customCells:a})))),l.a.createElement(De,{width:280,style:{padding:10,borderLeft:"1px solid #d3d3d3"}},W?"grid"===W.type?l.a.createElement(oe,{data:W}):"tab"===W.type?l.a.createElement(Ae,{data:W}):"label"===W.type?l.a.createElement(pe,{data:W}):a&&a.some((function(e){return e.type===W.type}))&&a.filter((function(e){return e.type===W.type}))[0].config&&l.a.createElement(a.filter((function(e){return e.type===W.type}))[0].config,{data:W,onChange:function(e){I({type:"UPDATE",data:e})}})||l.a.createElement(ke,{data:W}):l.a.createElement(l.a.Fragment,null)))))),l.a.createElement(m.a,{width:1e3,title:"Preview",visible:P,onCancel:function(){return R(!1)},footer:[l.a.createElement(d.a,{onClick:function(){var e=$.current.getData();alert(JSON.stringify(e))}},"Save"),l.a.createElement(d.a,{onClick:function(){return $.current.validate()}},"Validate")]},U&&l.a.createElement(V,{customCells:a,ref:$,data:O(U,(function(e){e.value=e.defaultValue||e.value})),key:U.id})))}));function Ve(e){var t=e.index,a=e.data,r=e.move,c=e.onRemove,i=e.onChange,u=Object(n.useRef)(null),s=Object(L.a)({item:{type:"config",index:t},collect:function(e){return{isDragging:e.isDragging()}}}),m=Object(o.a)(s,2)[1],f=Object(A.a)({accept:"config",hover:function(e,a){if(u.current){var n=e.index,l=t;if(n!==l){var c=u.current.getBoundingClientRect(),i=(c.bottom-c.top)/2,o=a.getClientOffset().y-c.top;n<l&&o<i||n>l&&o>i||(r(n,l),e.index=l)}}}});return m((0,Object(o.a)(f,2)[1])(u)),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{ref:u},l.a.createElement(k.f,{style:{cursor:"move"}}),l.a.createElement(fe.a,{onChange:function(e){i(e.target.value)},value:a,size:"small",style:{width:"120px",margin:"0 4px"}}),l.a.createElement(d.a,{type:"link",onClick:c,style:{padding:"0"}},l.a.createElement(k.g,null))))}function ze(e){var t=e.data,a=Object(n.useContext)(Fe);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ie.a,{labelCol:{span:8}},l.a.createElement(ie.a.Item,{label:"Title"},l.a.createElement(fe.a,{value:t.label,onChange:function(e){a({type:"UPDATE",data:U()(t,{label:{$set:e.target.value}})})}})),l.a.createElement(ie.a.Item,{label:"Required"},l.a.createElement(Ie.a,{checked:!!t.required,onChange:function(e){a({type:"UPDATE",data:U()(t,{required:{$set:e}})})}})),l.a.createElement(ie.a.Item,{label:"Readonly"},l.a.createElement(Ie.a,{checked:t.disabled,onChange:function(e){a({type:"UPDATE",data:U()(t,{disabled:{$set:e}})})}})),l.a.createElement(ie.a.Item,{label:"Options"},l.a.createElement(l.a.Fragment,null,t&&t.options&&t.options.map((function(e,n){return l.a.createElement(Ve,{key:"option-config-"+n,index:n,data:e.label,onChange:function(e){a({type:"UPDATE",data:Object(v.a)(Object(v.a)({},t),{},{options:U()(t.options,Object(le.a)({},n,{label:{$set:e||""}}))})})},onRemove:function(){a({type:"UPDATE",data:Object(v.a)(Object(v.a)({},t),{},{options:U()(t.options,{$splice:[[n,1]]})})})},move:function(e,n){var l,r=null===(l=t.options)||void 0===l?void 0:l[e];a({type:"UPDATE",data:Object(v.a)(Object(v.a)({},t),{},{options:U()(t.options,{$splice:[[e,1],[n,0,r]]})})})}})})),l.a.createElement(d.a,{type:"link",onClick:function(){var e=Object(v.a)({},t);e.options.push({label:"New Item",value:+new Date}),a({type:"UPDATE",data:e})}},"Add")))))}var Me=a(115),We=Me.a.Option,_e=Object(n.forwardRef)((function(e,t){var a,n=e.data,r=e.layout,c=e.onChange;return l.a.createElement(l.a.Fragment,null,l.a.createElement(W,{ref:t,required:!!n.required,warning:n.warning,layout:r,warnable:n.warnable,label:n.labeled?l.a.createElement("label",{title:n.label},n.label):l.a.createElement(l.a.Fragment,null),element:l.a.createElement(Me.a,{placeholder:n.placeholder,disabled:n.disabled,style:{width:"100%"},onChange:function(e){return c(e)}},null===(a=n.options)||void 0===a?void 0:a.map((function(e){return l.a.createElement(We,{key:e.value,value:e.value},e.label)})))}))})),Be=a(394),He=a(392),Je=Be.a.Text;function Ye(e){var t=e.data,a=[{label:l.a.createElement(l.a.Fragment,null,l.a.createElement(Je,null,"now: "),l.a.createElement(Je,{type:"secondary"},"\u5f53\u524d\u65f6\u95f4")),text:"now",value:"now"}],r=Object(n.useState)(a),c=Object(o.a)(r,2),i=c[0],u=c[1],s=Object(n.useContext)(Fe);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ie.a,{labelCol:{span:8}},l.a.createElement(ie.a.Item,{label:"Title"},l.a.createElement(fe.a,{value:t.label,onChange:function(e){s({type:"UPDATE",data:U()(t,{label:{$set:e.target.value}})})}})),l.a.createElement(ie.a.Item,{label:"Required"},l.a.createElement(Ie.a,{checked:!!t.required,onChange:function(e){s({type:"UPDATE",data:U()(t,{required:{$set:e}})})}})),l.a.createElement(ie.a.Item,{label:"Readonly"},l.a.createElement(Ie.a,{checked:t.disabled,onChange:function(e){s({type:"UPDATE",data:U()(t,{disabled:{$set:e}})})}})),l.a.createElement(ie.a.Item,{label:"Default"},l.a.createElement(He.a,{onSearch:function(e){u(a.filter((function(t){return t.text.search(new RegExp(e,"i"))>-1})))}},i.map((function(e){return l.a.createElement(He.a.Option,{value:e.value,key:e.value},e.label)}))))))}var Ge=a(393),Ke=a(47),Qe=a.n(Ke),Xe=Object(n.forwardRef)((function(e,t){var a=e.data,n=e.layout,r=e.onChange;return l.a.createElement(l.a.Fragment,null,l.a.createElement(W,{ref:t,required:!!a.required,warning:a.warning,layout:n,warnable:a.warnable,label:a.labeled?l.a.createElement("label",{title:a.label},a.label):l.a.createElement(l.a.Fragment,null),element:l.a.createElement(Ge.a,{style:{width:"100%"},disabled:a.disabled,value:a.value?Qe()(a.value):null,placeholder:a.placeholder,onChange:function(e){return r(e?e.format("YYYY-MM-DD HH:mm:ss"):null)}})}))}));function Ze(e){var t=e.data,a=Object(n.useContext)(Fe);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ie.a,{labelCol:{span:8}},l.a.createElement(ie.a.Item,{label:"Title"},l.a.createElement(fe.a,{value:t.label,onChange:function(e){a({type:"UPDATE",data:U()(t,{label:{$set:e.target.value}})})}})),l.a.createElement(ie.a.Item,{label:"Required"},l.a.createElement(Ie.a,{checked:!!t.required,onChange:function(e){a({type:"UPDATE",data:U()(t,{required:{$set:e}})})}})),l.a.createElement(ie.a.Item,{label:"Readonly"},l.a.createElement(Ie.a,{checked:t.disabled,onChange:function(e){a({type:"UPDATE",data:U()(t,{disabled:{$set:e}})})}})),l.a.createElement(ie.a.Item,{label:"\u9009\u9879"},l.a.createElement(l.a.Fragment,null,t&&t.options&&t.options.map((function(e,n){return l.a.createElement(Ve,{key:"option-config-"+n,index:n,data:e.label,onChange:function(e){a({type:"UPDATE",data:Object(v.a)(Object(v.a)({},t),{},{options:U()(t.options,Object(le.a)({},n,{label:{$set:e||""}}))})})},onRemove:function(){a({type:"UPDATE",data:Object(v.a)(Object(v.a)({},t),{},{options:U()(t.options,{$splice:[[n,1]]})})})},move:function(e,n){var l,r=null===(l=t.options)||void 0===l?void 0:l[e];a({type:"UPDATE",data:Object(v.a)(Object(v.a)({},t),{},{options:U()(t.options,{$splice:[[e,1],[n,0,r]]})})})}})})),l.a.createElement(d.a,{type:"link",onClick:function(){var e=Object(v.a)({},t);e.options.push({label:"\u65b0\u9009\u9879",value:+new Date}),a({type:"UPDATE",data:e})}},"\u6dfb\u52a0\u5217")))))}var et=a(400),tt=function(e){var t=e.data,a=e.layout,n=e.onChange;return l.a.createElement(l.a.Fragment,null,l.a.createElement(W,{layout:a,required:!!t.required,warnable:t.warnable,label:l.a.createElement("label",null,t.label),element:l.a.createElement(l.a.Fragment,null,l.a.createElement(et.a.Group,{options:t.options,onChange:function(e){return n(e)}}))}))},at=Object(n.forwardRef)((function(e,t){var a=e.data,n=e.layout,r=e.onChange;return l.a.createElement(l.a.Fragment,null,l.a.createElement(W,{ref:t,required:"function"===typeof a.required||a.required,warning:a.warning,layout:n,warnable:a.warnable,label:a.labeled?l.a.createElement("label",{title:a.label},a.label):l.a.createElement(l.a.Fragment,null),element:l.a.createElement(Ie.a,{checked:a.value,onChange:function(e){return r(e)},disabled:a.disabled})}))})),nt=Object(n.forwardRef)((function(e,t){var a=e.data;return l.a.createElement("div",{style:{height:42,padding:"0 10px"},ref:t},l.a.createElement("label",{style:{lineHeight:"42px"},title:a.label},a.label||" "))})),lt=Object(n.forwardRef)((function(e,t){var a=e.data,n=e.layout,r=e.onChange;return l.a.createElement(l.a.Fragment,null,l.a.createElement(W,{ref:t,required:"function"===typeof a.required||a.required,warning:a.warning,layout:n,warnable:a.warnable,label:a.labeled?l.a.createElement("label",{title:a.label},a.label):l.a.createElement(l.a.Fragment,null),element:l.a.createElement(fe.a,{disabled:a.disabled,value:a.value,placeholder:a.placeholder,onChange:function(e){r(e.target.value)}})}))}));var rt=function(){var e=Object(n.useMemo)((function(){return[{name:"Select",type:"select",config:ze,cell:_e,createWidgetInstance:function(){var e={type:"select",id:"select".concat((new Date).getTime()),active:!1,label:"Select",placeholder:"Select...",options:[],required:!1};return e}},{name:"Datepicker",type:"datetime",config:Ye,cell:Xe,createWidgetInstance:function(){var e={type:"datetime",id:"datetime".concat((new Date).getTime()),active:!1,label:"Date",placeholder:"Select...",required:!1};return e}},{name:"Checkbox",type:"checkbox",config:Ze,cell:tt,createWidgetInstance:function(){var e={type:"checkbox",id:"checkbox".concat((new Date).getTime()),active:!1,label:"Checkbox",options:[],required:!1};return e}},{name:"Switch",type:"switch",cell:at,createWidgetInstance:function(){return{type:"switch",id:"switch".concat((new Date).getTime()),active:!1,label:"Switch"}}},{name:"Label",type:"label",cell:nt,config:pe,createWidgetInstance:function(){return{type:"label",id:"label".concat((new Date).getTime()),active:!1,label:"Label"}}},{name:"Input",type:"input",cell:lt,createWidgetInstance:function(){var e={type:"input",id:"input".concat((new Date).getTime()),active:!1,label:"Input",placeholder:"Input...",required:!1};return e}}]}),[]);return l.a.createElement($e,{customCells:e})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(rt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[203,1,2]]]);
//# sourceMappingURL=main.c6fdb57c.chunk.js.map