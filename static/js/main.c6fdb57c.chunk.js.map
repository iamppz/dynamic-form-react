{"version":3,"sources":["components/Form/util.ts","components/Form/Designer/util.tsx","components/Form/constants/WidgetGroups.tsx","components/Form/hooks/interactions.ts","components/Form/index.tsx","components/Form/Designer/Cell/GridCell/Pool/Lane.tsx","components/Form/Designer/Cell/GridCell/Pool/DndLane.tsx","components/Form/Designer/FormGroup/index.tsx","components/Form/Designer/Cell/GridCell/Pool/index.tsx","components/Form/Designer/Cell/GridCell/index.tsx","components/Form/Designer/Cell/TabCell/index.tsx","components/Form/Designer/Cell/index.tsx","components/Form/Designer/DnDCell.tsx","components/Form/Designer/Cell/GridCellConfig/LaneConfig.tsx","components/Form/Designer/Cell/GridCellConfig/index.tsx","components/Form/Designer/Widget.tsx","components/Form/Designer/WidgetGroup.tsx","components/LabelCell/LabelCellConfig.tsx","components/Form/Layout.tsx","components/Form/Designer/DefaultCellConfig.tsx","components/Form/Designer/Cell/TabCell/TabCellConfig/TabConfig.tsx","components/Form/Designer/Cell/TabCell/TabCellConfig/index.tsx","components/Form/Designer/index.tsx","components/SelectCell/SelectCellConfig/OptionConfig.tsx","components/SelectCell/SelectCellConfig/index.tsx","components/SelectCell/index.tsx","components/DateCell/DateCellConfig.tsx","components/DateCell/index.tsx","components/Form/CheckboxCell/CheckboxCellConfig.tsx","components/Form/CheckboxCell/index.tsx","components/SwitchCell/index.tsx","components/LabelCell/LabelCell.tsx","components/InputCell/InputCell.tsx","App.tsx","serviceWorker.js","index.js"],"names":["InteractContext","React","createContext","set","root","id","key","value","strings","split","id1","func","data","lanes","lane","cellDataList","element","type","index","parseInt","id2","row","item","clone","src","copy","JSON","parse","stringify","forEach","dest","required","onChange","onClick","cloneAndForEach","handler","recursion","i","length","cellData","locate","matchFunc","location","parentId","laneIndex","indexOf","getCellDataList","list","drop","cell","dropItemId","position","dropLocation","dropList","splice","active","reducer","state","action","dragLocation","dragList","dragCell","dragItem","push","rootCellData","undefined","cellLocation","deleteActive","targetId","options","Array","warning","label","warnable","createWidgetInstance","Date","getTime","span","tabs","WidgetGroups","name","widgets","icon","useInteractions","dispatch","setValue","useCallback","setOption","getValue","filter","fetchValue","InstanceContext","forwardRef","ref","customCells","useReducer","innerData","useImperativeHandle","getData","result","childLane","detail","listElement","hiddenValues","getValues","validate","constraintViolations","message","description","interactions","useUpdateEffect","Provider","Cell","className","Lane","direction","instanceDispatch","useContext","cells","useMemo","map","child","props","layout","style","width","minHeight","height","DndLane","DesignerContext","useDrop","accept","monitor","isOver","getClientOffset","instance","find","customCell","collect","shallow","getItem","FormGroup","join","InstanceListHeaderItem","styled","Col","Pool","isDesigner","getLane","color","size","update","$push","$apply","x","y","GridCell","Tab","ActiveTab","Tabs","TabCell","designerDispatch","useState","findIndex","tabIndex","setTabIndex","handleSwitch","children","labeled","valueObject","command","unstagedValues","unstagedId","hasOwnProperty","unstagedValue","unstagedIds","values","some","createElement","DnDCell","useRef","dropClassName","setDropClassName","hover","current","hoverBoundingRect","getBoundingClientRect","coord","hoverMiddleY","bottom","top","hoverClientY","hoverMiddleX","right","left","hoverClientX","clientOffset","useDrag","isDragging","begin","drag","event","stopPropagation","opacity","zIndex","DeleteTwoTone","cursor","LaneConfig","move","onRemove","onResize","dragIndex","hoverIndex","margin","padding","GridCellConfig","labelCol","Item","finalSpan","$set","$splice","from","to","StyledLi","li","Widget","widget","listStyle","w","LabelCellConfig","target","Header","Layout","Sider","Content","WhiteLayout","WhiteHeader","WhiteSider","WhiteContent","DefaultCellConfig","checked","disabled","defaultValue","TabConfig","onRename","TabCellConfig","tab","LeftSider","attrs","FullHeightBorderedLayout","ToolBar","Designer","availableCustomCells","toolbar","defaultCellData","builtinCellDataTypes","previewDialogVisible","setPreviewDialogVisible","previewData","setPreviewData","previewRef","delFunction","keyCode","ctrlKey","finalAvailableCells","useEffect","document","addEventListener","removeEventListener","preview","reset","load","get","getActive","widgetGroups","group","DndProvider","backend","HTML5Backend","g","WidgetGroup","alert","borderLeft","config","title","visible","onCancel","footer","Form","OptionConfig","SelectCellConfig","option","Option","Select","SelectCell","placeholder","Text","Typography","DateCellConfig","defaultValueOptions","text","currentDefaultValueOptions","setCurrentDefaultValueOptions","onSearch","searchText","search","RegExp","DateCell","moment","date","format","CheckboxCellConfig","Group","checkedValues","SwitchCell","LabelCell","lineHeight","InputCell","App","CheckboxCell","Boolean","window","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.c6fdb57c.chunk.js","sourcesContent":["import { CellData } from \"./schema\";\nimport { forEach } from \"./Designer/util\";\nimport { CellDataType } from \"./type\";\nimport React from \"react\";\n\nexport const InteractContext = React.createContext<any>(null);\n\nexport function getValues(cell: CellData): any {\n  let result: any = {};\n  let func = function (data: CellData) {\n    if (data.lanes) {\n      data.lanes.forEach((lane) => {\n        lane.cellDataList.forEach((element) => {\n          switch (element.type) {\n            case \"grid\":\n              func(element);\n              break;\n            case \"list\":\n              result[element.id] = [];\n              element.lanes!.forEach((childLane) => {\n                let detail: { [key: string]: any } = {};\n                childLane.cellDataList.forEach((listElement: CellData) => {\n                  detail[listElement.id] = listElement.value;\n                });\n                detail = { ...detail, ...childLane.hiddenValues };\n                result[element.id].push(detail);\n              });\n              break;\n            default:\n              result[element.id] = element.value;\n              break;\n          }\n        });\n        result = { ...result, ...lane.hiddenValues };\n      });\n    }\n  };\n  func(cell);\n  return result;\n}\n\n/**\n * Get value from cell data by id\n * @param root: root cell data\n * @param id: e.g., name, details.0.name, details.name\n */\nexport function getValue(root: CellData, id: string): any | any[] {\n  let value: any = null;\n  const strings = id.split(\".\");\n  const id1 = strings[0];\n  let func = function (data: CellData) {\n    if (data.lanes) {\n      for (const lane of data.lanes) {\n        for (const element of lane.cellDataList) {\n          switch (element.type) {\n            case \"grid\":\n            case \"tab\":\n              func(element);\n              break;\n            default:\n              if (element.id === id1) {\n                if (element.type === \"list\") {\n                  if (strings.length === 3) {\n                    const index = parseInt(strings[1]);\n                    const id2 = strings[2];\n                    const row = element.lanes![index];\n                    for (let item of row.cellDataList) {\n                      if (item.id === id2) {\n                        value = item.value;\n                        return true;\n                      }\n                    }\n                  } else {\n                    value = [];\n                    const id2 = strings[1];\n                    for (const row of element.lanes!) {\n                      for (let item of row.cellDataList.filter(\n                        (item) => item.id === id2\n                      )) {\n                        value.push(item.value);\n                      }\n                    }\n                    return true;\n                  }\n                } else {\n                  value = element.value;\n                  return true;\n                }\n              }\n              break;\n          }\n        }\n      }\n    }\n    return false;\n  };\n  func(root);\n  return value;\n}\n\nexport function set(root: CellData, id: string, key: string, value: any): void {\n  const strings = id.split(\".\");\n  const id1 = strings[0];\n  let func = function (data: CellData) {\n    if (data.lanes) {\n      for (const lane of data.lanes) {\n        for (const element of lane.cellDataList) {\n          switch (element.type) {\n            case \"grid\":\n            case \"tab\":\n              func(element);\n              break;\n            default:\n              if (element.id === id1) {\n                if (element.type === \"list\") {\n                  const index = parseInt(strings[1]);\n                  const id2 = strings[2];\n                  const row = element.lanes![index];\n                  for (let item of row.cellDataList) {\n                    if (item.id === id2) {\n                      item[key] = value;\n                      return true;\n                    }\n                  }\n                } else {\n                  element[key] = value;\n                  return true;\n                }\n              }\n              break;\n          }\n        }\n      }\n    }\n    return false;\n  };\n  func(root);\n}\n\nfunction formatValue(value: any, type: CellDataType | string): any {\n  if (type === \"datetime\") {\n    return value.substr(0, 19).replace(\"T\", \" \");\n  } else {\n    return value;\n  }\n}\n\nexport function setData(root: CellData, form: any): void {\n  const master: any = { ...form };\n  root.lanes![0].hiddenValues = master;\n  for (let cellData of root.lanes![0].cellDataList) {\n    delete master[cellData.id];\n    forEach(cellData, (item) => {\n      const value = form[cellData.id];\n      if (item.type !== \"list\" && item.type !== \"grid\" && item.type !== \"tab\") {\n        cellData.value = value ? formatValue(value, cellData.type) : null;\n      } else if (item.type === \"list\" && value) {\n        for (const row of value) {\n          const detail: any = { ...row };\n          item.lanes?.push({\n            ...item.lanes[0],\n            cellDataList: item.lanes[0].cellDataList.map((x) => {\n              delete detail[x.id];\n              const y: CellData = {\n                ...x,\n              };\n              const value = row[x.id];\n              y.value = value ? formatValue(value, y.type) : null;\n              return y;\n            }),\n            hiddenValues: detail,\n          });\n        }\n        if (item.lanes!.length > 1) {\n          item.lanes?.splice(0, 1);\n        }\n      }\n    });\n  }\n}\n","import { CellData, CellLocation } from \"../schema\";\nimport { set } from \"../util\";\nimport { ReducerActionProps } from \"../type\";\n\nexport function clone(src: CellData): CellData {\n  const copy = JSON.parse(JSON.stringify(src));\n  forEach(src, (src) => {\n    forEach(copy, (dest) => {\n      if (dest.id === src.id) {\n        if (typeof src.required === \"function\") {\n          dest.required = src.required;\n        }\n        if (src.onChange) {\n          dest.onChange = src.onChange;\n        }\n        if (src.onClick) {\n          dest.onClick = src.onClick;\n        }\n      }\n    });\n  });\n  return copy;\n}\n\n/**\n * Clone and iterate nested CellData\n * @param root\n * @param handler\n */\nexport function cloneAndForEach(\n  root: CellData,\n  handler: (\n    value: CellData,\n    index: number | null,\n    array: CellData[] | null\n  ) => void\n): CellData {\n  const copy = clone(root);\n  forEach(copy, handler);\n  return copy;\n}\n\n/**\n * Iterate nested CellData\n * @param root\n * @param handler\n */\nexport function forEach(\n  root: CellData,\n  handler: (\n    value: CellData,\n    index: number | null,\n    array: CellData[] | null\n  ) => void\n): void {\n  let recursion = function (data: CellData): void {\n    if (data.lanes) {\n      for (const lane of data.lanes) {\n        for (let i = 0; i < lane.cellDataList.length; i++) {\n          let cellData = lane.cellDataList[i];\n          handler(cellData, i, lane.cellDataList);\n          if (\n            cellData.type === \"grid\" ||\n            cellData.type === \"list\" ||\n            cellData.type === \"tab\"\n          ) {\n            recursion(cellData);\n          }\n        }\n      }\n    }\n  };\n  handler(root, null, null);\n  recursion(root);\n}\n\nexport function locate(\n  root: CellData,\n  matchFunc: (value: CellData, index: number, array: CellData[]) => boolean\n): [CellLocation, CellData[], CellData] | null {\n  let location: [CellLocation, CellData[], CellData] | null = null;\n  let func = function (\n    data: CellData\n  ): [CellLocation, CellData[], CellData] | null {\n    if (data.lanes) {\n      for (const lane of data.lanes) {\n        for (let i = 0; i < lane.cellDataList.length; i++) {\n          let cellData = lane.cellDataList[i];\n          if (matchFunc(cellData, i, lane.cellDataList)) {\n            location = [\n              {\n                parentId: data.id,\n                laneIndex: data.lanes?.indexOf(lane),\n                index: i,\n              },\n              lane.cellDataList,\n              cellData,\n            ];\n            break;\n          }\n          if (\n            cellData.type === \"grid\" ||\n            cellData.type === \"list\" ||\n            cellData.type === \"tab\"\n          ) {\n            func(cellData);\n          }\n        }\n      }\n    }\n    return location;\n  };\n  return func(root);\n}\n\nexport function deleteActive(rootCellData: CellData) {\n  const location = locate(\n    rootCellData,\n    (item) => item.active !== undefined && item.active\n  );\n  if (location) {\n    const [cellLocation, list] = location;\n    list.splice(cellLocation.index, 1);\n  }\n}\n\nexport function getCellDataList(\n  root: CellData,\n  parentId: string,\n  index: number\n): CellData[] | null {\n  let list: CellData[] | null = null;\n  let func = function (data: CellData) {\n    if (data.id === parentId) {\n      return data.lanes![index].cellDataList;\n    }\n    if (data.lanes) {\n      for (const lane of data.lanes) {\n        for (const cellData of lane.cellDataList) {\n          if (\n            cellData.type === \"grid\" ||\n            cellData.type === \"list\" ||\n            cellData.type === \"tab\"\n          ) {\n            if (cellData.id === parentId) {\n              list = cellData.lanes![index].cellDataList;\n            } else {\n              func(cellData);\n            }\n          }\n        }\n      }\n    }\n    return list;\n  };\n  return func(root);\n}\n\nfunction drop(\n  root: CellData,\n  cell: CellData,\n  dropItemId: string,\n  position: string\n) {\n  const [dropLocation, dropList] = locate(\n    root,\n    (item) => item.id === dropItemId\n  )!;\n  if (position === \"up\") {\n    dropList.splice(dropLocation.index, 0, cell);\n  } else {\n    dropList.splice(dropLocation.index + 1, 0, cell);\n  }\n  active(root, cell.id);\n}\nexport function reducer(state: any, action: ReducerActionProps): CellData {\n  if (!action.type) {\n    return state;\n  }\n  if (action.type === \"INIT\") {\n    return action.data;\n  }\n  const copy = clone(state);\n  if (action.type === \"POSITIONED_MOVE\") {\n    const [dragLocation, dragList, dragCell] = locate(\n      copy,\n      (item) => item.id === action.id\n    )!;\n    const location = locate(copy, (item) => item.id === action.dropItemId);\n    if (location) {\n      dragList.splice(dragLocation.index, 1);\n      drop(copy, dragCell, action.dropItemId, action.position);\n    }\n  } else if (action.type === \"POSITIONED_ADD\") {\n    const location = locate(copy, (item) => item.id === action.dropItemId);\n    if (location) {\n      drop(copy, action.dragItem, action.dropItemId, action.position);\n    }\n  } else if (action.type === \"ADD\") {\n    const cells = getCellDataList(\n      copy,\n      action.location.parentId,\n      action.location.index\n    )!;\n    cells.push(action.dragItem);\n    active(copy, action.dragItem.id);\n  } else if (action.type === \"UPDATE\") {\n    const [location, list] = locate(\n      copy,\n      (data) => data.id === action.data.id\n    )!;\n    list.splice(location.index, 1, action.data);\n  } else if (action.type === \"MOVE\") {\n    const [location, list, cell] = locate(\n      copy,\n      (item) => item.id === action.id\n    )!;\n    list.splice(location.index, 1);\n    const cellDataList = getCellDataList(\n      copy,\n      action.location.parentId,\n      action.location.index\n    );\n    cellDataList?.push(cell);\n    active(copy, cell.id);\n  } else if (action.type === \"DELETE\") {\n    const [location, list] = locate(copy, (item) => item.id === action.id)!;\n    list.splice(location.index, 1);\n  } else if (action.type === \"ACTIVE\") {\n    active(copy, action.id);\n  } else if (action.type === \"DELETE_ACTIVE\") {\n    deleteActive(copy);\n  } else if (action.type === \"SET\") {\n    set(copy, action.targetId, action.key, action.value);\n  } else if (action.type === \"SET_VALUE\") {\n    set(copy, action.targetId, \"value\", action.value);\n  } else if (action.type === \"SET_OPTION\") {\n    set(copy, action.targetId, \"options\", action.options);\n  } else if (action.type === \"VALIDATE\") {\n    return cloneAndForEach(state, function (cellData) {\n      if (\n        typeof cellData.required === \"function\"\n          ? !cellData.required()\n          : cellData.required &&\n            (!cellData.value ||\n              (cellData.value instanceof Array && cellData.value.length === 0))\n      ) {\n        cellData.warning = `${cellData.label} is required.`;\n        cellData.warnable = true;\n      } else {\n        cellData.warnable = false;\n        cellData.warning = \"\";\n      }\n    });\n  }\n  return copy;\n}\n\nexport function getActive(root: CellData): CellData | null {\n  const location = locate(\n    root,\n    (item) => item.active !== undefined && item.active\n  );\n  return location ? location[2] : null;\n}\n\nexport function active(root: CellData, id: string) {\n  forEach(root, function (cellData) {\n    cellData.active = id === cellData.id;\n  });\n}\n\nexport function createWidgetInstance(type: string): CellData {\n  let cellData: CellData = {\n    type: type,\n    id: type + new Date().getTime(),\n    active: false,\n    label: type,\n  };\n  if (cellData.type === \"grid\") {\n    cellData.lanes = [\n      { span: 12, cellDataList: [] },\n      { span: 12, cellDataList: [] },\n    ];\n  } else if (cellData.type === \"tab\") {\n    cellData.lanes = [\n      { span: 24, cellDataList: [] },\n      { span: 0, cellDataList: [] },\n    ];\n    cellData.tabs = [\"Tab 1\", \"Tab 2\"];\n  } else if (cellData.type === \"list\") {\n    cellData.label = \"List\";\n    cellData.lanes = [{ cellDataList: [], span: 100 }];\n  }\n  return cellData;\n}\n","import {\n  AiOutlineCalendar,\n  AiOutlineCheckSquare,\n  AiOutlineDownSquare,\n  AiOutlineEdit,\n  AiOutlineFontSize,\n  AiOutlineOrderedList,\n  AiOutlineTable,\n} from \"react-icons/ai\";\nimport React from \"react\";\nimport { WidgetData } from \"../schema\";\n\nexport const WidgetGroups: { name: string; widgets: WidgetData[] }[] = [\n  {\n    name: \"Basic\",\n    widgets: [\n      {\n        type: \"input\",\n        icon: <AiOutlineEdit />,\n        name: \"Input\",\n      },\n      {\n        type: \"textarea\",\n        icon: <AiOutlineEdit />,\n        name: \"Textarea\",\n      },\n      {\n        type: \"select\",\n        icon: <AiOutlineDownSquare />,\n        name: \"Select\",\n      },\n      {\n        type: \"datetime\",\n        icon: <AiOutlineCalendar />,\n        name: \"Datepicker\",\n      },\n      {\n        type: \"checkbox\",\n        icon: <AiOutlineCheckSquare />,\n        name: \"Checkbox\",\n      },\n      {\n        type: \"label\",\n        icon: <AiOutlineFontSize />,\n        name: \"Label\",\n      },\n    ],\n  },\n  {\n    name: \"Layout\",\n    widgets: [\n      { type: \"grid\", icon: <AiOutlineTable />, name: \"Grid\" },\n      { type: \"tab\", icon: <AiOutlineTable />, name: \"Tab\" },\n      {\n        type: \"list\",\n        icon: <AiOutlineOrderedList />,\n        name: \"List\",\n      },\n    ],\n  },\n];\n","import React, { useCallback } from \"react\";\nimport { ReducerActionProps } from \"../type\";\nimport { CellData } from \"../schema\";\nimport { getValue as fetchValue } from \"../util\";\n\nexport interface Interactions {\n  setValue: (id: string, value: any) => void;\n  setOption: (id: string, options: { value: any; label: string }[]) => void;\n  getValue: (id: string) => any;\n  set: (id: string, key: string, value: any) => void;\n}\n\nexport default function useInteractions(\n  dispatch: React.Dispatch<ReducerActionProps>,\n  root: CellData\n): Interactions {\n  const setValue = useCallback(\n    (id: string, value: any) => {\n      dispatch({\n        type: \"SET_VALUE\",\n        targetId: id,\n        value,\n      });\n    },\n    [dispatch]\n  );\n  const setOption = useCallback(\n    (id: string, options: { value: any; label: string }[]) => {\n      dispatch({\n        type: \"SET_OPTION\",\n        options: options,\n        targetId: id,\n      });\n    },\n    [dispatch]\n  );\n  const getValue = useCallback(\n    (id: string): any => {\n      return fetchValue(root, id);\n    },\n    [root]\n  );\n  const set = useCallback(\n    (id: string, key: string, value: any) => {\n      dispatch({\n        type: \"SET\",\n        targetId: id,\n        key,\n        value,\n      });\n    },\n    [dispatch]\n  );\n  return { setValue, setOption, getValue, set };\n}\n","import React, { forwardRef, useImperativeHandle, useReducer } from \"react\";\nimport { Cell, CustomCell } from \"./Designer/Cell\";\nimport { forEach, reducer } from \"./Designer/util\";\nimport { CellData, ConstrainViolation } from \"./schema\";\nimport { getValues, InteractContext } from \"./util\";\nimport { useUpdateEffect } from \"react-use\";\nimport useInteractions from \"./hooks/interactions\";\n\nexport interface InstanceProps {\n  data: CellData;\n  customCells?: CustomCell[];\n}\n\n/**\n * Instance context provides the same utilities with designer context,\n * but also allows user's input\n */\nexport const InstanceContext = React.createContext<any>(null);\nexport default forwardRef(({ data, customCells }: InstanceProps, ref: any) => {\n  const [innerData, dispatch] = useReducer(reducer, data);\n  useImperativeHandle(ref, () => ({\n    getData: function () {\n      return getValues(innerData);\n    },\n    validate: function (): ConstrainViolation[] {\n      dispatch({\n        type: \"VALIDATE\",\n      });\n      const constraintViolations: ConstrainViolation[] = [];\n      forEach(innerData, function (cellData) {\n        if (cellData.required && !cellData.value) {\n          constraintViolations.push({\n            id: cellData.id,\n            message: `${cellData.label}不能为空`,\n            value: cellData.value,\n            description: \"required\",\n          });\n        }\n      });\n      return constraintViolations;\n    },\n  }));\n  const interactions = useInteractions(dispatch, innerData);\n  useUpdateEffect(() => {\n    dispatch({ type: \"INIT\", data });\n  }, [data]);\n  return (\n    <InstanceContext.Provider value={dispatch}>\n      <InteractContext.Provider value={interactions}>\n        <Cell\n          ref={ref}\n          cellData={innerData}\n          className={\"preview\"}\n          customCells={customCells}\n        />\n      </InteractContext.Provider>\n    </InstanceContext.Provider>\n  );\n});\n","import React, { forwardRef, useContext, useMemo } from \"react\";\nimport { CellData, SwimlaneLocation } from \"../../../../schema\";\nimport { DnDCell } from \"../../../DnDCell\";\nimport { Cell, CustomCell } from \"../../index\";\nimport { InstanceContext } from \"../../../../index\";\nimport { Col } from \"antd\";\n\ninterface LaneProps {\n  cellDataList: CellData[];\n  direction: \"horizontal\" | \"vertical\";\n  className?: string;\n  span?: number;\n  customCells?: CustomCell[];\n  location: SwimlaneLocation;\n}\n\nexport const Lane = forwardRef(\n  (\n    {\n      cellDataList,\n      direction,\n      className,\n      span = 24,\n      customCells,\n      location,\n    }: LaneProps,\n    ref: any\n  ) => {\n    const instanceDispatch = useContext(InstanceContext);\n    const cells = useMemo(() => {\n      return cellDataList.map((child, index) => {\n        const props = {\n          location,\n          key: child.id,\n          layout: direction,\n          cellData: child,\n          customCells,\n          style: {\n            width: child.width,\n          },\n        };\n        return instanceDispatch === null ? (\n          <DnDCell {...props} index={index} />\n        ) : (\n          <Cell {...props} />\n        );\n      });\n    }, [cellDataList, customCells, direction, instanceDispatch, location]);\n\n    return (\n      <Col span={span} className={`lane ${direction}${className || \"\"}`}>\n        <div style={{ width: \"100%\", minHeight: 42, height: \"100%\" }} ref={ref}>\n          {cells}\n        </div>\n      </Col>\n    );\n  }\n);\n","import React, { useContext } from \"react\";\nimport { useDrop } from \"react-dnd\";\nimport { Lane } from \"./Lane\";\nimport { CellData } from \"../../../../schema\";\nimport { SwimlaneLocation } from \"../../../../schema\";\nimport { DesignerContext } from \"../../../index\";\nimport { createWidgetInstance } from \"../../../util\";\nimport { CustomCell } from \"../../index\";\n\ninterface LaneProps {\n  cellDataList: CellData[];\n  direction: \"horizontal\" | \"vertical\";\n  location: SwimlaneLocation;\n  span?: number;\n  customCells?: CustomCell[];\n}\n\nexport const DndLane = function ({\n  cellDataList,\n  direction,\n  location,\n  span = 24,\n  customCells,\n}: LaneProps) {\n  const dispatch = useContext(DesignerContext);\n  const [{ isOver }, drop] = useDrop({\n    accept: [\n      \"input\",\n      \"grid\",\n      \"textarea\",\n      \"select\",\n      \"datetime\",\n      \"checkbox\",\n      \"list\",\n      \"instance\",\n      \"label\",\n      \"tab\",\n      ...(customCells || []).map((item) => item.type),\n    ],\n    drop: (item: any, monitor) => {\n      if (isOver) {\n        const clientOffset = monitor.getClientOffset();\n        if (!clientOffset) {\n          return;\n        }\n\n        if (item.type === \"instance\") {\n          dispatch({\n            type: \"MOVE\",\n            id: item.id,\n            location: location,\n          });\n        } else {\n          let instance: CellData | null = null;\n          if (customCells) {\n            const find = customCells.find(\n              (customCell) => customCell.type === item.type\n            );\n            if (find && find.createWidgetInstance) {\n              instance = find.createWidgetInstance();\n            }\n          }\n          if (!instance) {\n            instance = createWidgetInstance(item.type as string);\n          }\n          dispatch({\n            type: \"ADD\",\n            dragItem: instance!,\n            location: location,\n          });\n        }\n      }\n    },\n    collect: (monitor) => {\n      let isOver = monitor.isOver({ shallow: true });\n      if (isOver && monitor.getItem().id === location.parentId) {\n        isOver = false;\n      }\n      return { isOver: isOver };\n    },\n  });\n  return (\n    <Lane\n      location={location}\n      span={span}\n      cellDataList={cellDataList}\n      className={isOver ? \" hovered\" : \"\"}\n      ref={drop}\n      direction={direction}\n      customCells={customCells}\n    />\n  );\n};\n","import React, { forwardRef, useContext } from \"react\";\nimport \"./index.css\";\nimport { InstanceContext } from \"../../index\";\n\ninterface FormGroupProps {\n  layout?: \"vertical\" | \"horizontal\";\n  required?: boolean;\n  warning?: string | null;\n  warnable?: boolean;\n  label?: JSX.Element | null;\n  element: JSX.Element | null;\n}\n\nexport const FormGroup = forwardRef(\n  (\n    {\n      layout = \"horizontal\",\n      required = false,\n      warning = null,\n      warnable = true,\n      label = <></>,\n      element,\n    }: FormGroupProps,\n    ref: any\n  ) => {\n    const instanceDispatch = useContext(InstanceContext);\n    return (\n      <table ref={ref} className={[\"form-group\", layout].join(\" \")}>\n        <tbody>\n          {layout === \"horizontal\" ? (\n            <>\n              <tr>\n                <td className={\"label\"}>\n                  {required ? <span className={\"required\"}>*</span> : <></>}\n                  {label}\n                </td>\n                <td className={\"element\"}>{element}</td>\n              </tr>\n              {warnable ? (\n                <tr>\n                  <td />\n                  <td className={\"warning\"}>\n                    {warning ? <span>{warning}</span> : <span>&nbsp;</span>}\n                  </td>\n                </tr>\n              ) : (\n                <></>\n              )}\n            </>\n          ) : (\n            <>\n              {!instanceDispatch && (\n                <tr>\n                  <td className={\"label\"}>\n                    {required ? <span className={\"required\"}>*</span> : <></>}\n                    {label}\n                  </td>\n                </tr>\n              )}\n              <tr>\n                <td className={\"element\"}>{element}</td>\n              </tr>\n              {warnable ? (\n                <tr>\n                  <td className={\"warning\"}>\n                    {warning ? <span>{warning}</span> : <span>&nbsp;</span>}\n                  </td>\n                </tr>\n              ) : (\n                <></>\n              )}\n            </>\n          )}\n        </tbody>\n      </table>\n    );\n  }\n);\n","import React, { forwardRef, useCallback, useContext, useMemo } from \"react\";\nimport { Button, Col, Row } from \"antd\";\nimport styled from \"styled-components\";\nimport update from \"immutability-helper\";\nimport { CellData, LaneData } from \"../../../../schema\";\nimport { InstanceContext } from \"../../../../index\";\nimport { DndLane } from \"./DndLane\";\nimport { Lane } from \"./Lane\";\nimport \"./index.css\";\nimport { CustomCell } from \"../../index\";\nimport { FormGroup } from \"../../../FormGroup\";\n\ninterface PoolProps {\n  direction?: \"horizontal\" | \"vertical\";\n  cellData: CellData;\n  customCells?: CustomCell[];\n}\n\nconst InstanceListHeaderItem = styled(Col)`\n  padding: 0 10px;\n  white-space: nowrap;\n  width: 100%;\n  overflow-x: auto;\n\n  > div {\n    width: 200px;\n    display: inline-block;\n  }\n`;\n\nexport const Pool = forwardRef(\n  (\n    { direction = \"horizontal\", cellData, customCells }: PoolProps,\n    ref: any\n  ) => {\n    const instanceDispatch = useContext(InstanceContext);\n    const isDesigner = instanceDispatch === null;\n    const getLane = useCallback(\n      (lane: LaneData, index: number) => {\n        const props = {\n          key: `${cellData.id}-${index}`,\n          direction: direction,\n          cellDataList: lane.cellDataList,\n          location: {\n            parentId: cellData.id,\n            index: index,\n          },\n          span: lane.span,\n          customCells: customCells,\n        };\n        return isDesigner ? <DndLane {...props} /> : <Lane {...props} />;\n      },\n      [cellData.id, customCells, direction, isDesigner]\n    );\n    const lanes = useMemo(\n      () => cellData.lanes!.map((lane, index) => getLane(lane, index)),\n      [cellData.lanes, getLane]\n    );\n\n    return (\n      <>\n        <Row ref={ref} className={\"lanes\"}>\n          {direction === \"horizontal\" ? (\n            <>{lanes}</>\n          ) : (\n            <FormGroup\n              required={!!cellData.required}\n              warning={cellData.warning}\n              warnable={cellData.warnable!}\n              element={\n                <>\n                  {!isDesigner && (\n                    <InstanceListHeaderItem span={24}>\n                      {cellData.lanes![0].cellDataList.map((item) => (\n                        <div style={{ width: item.width }}>\n                          {item.required && (\n                            <span style={{ color: \"red\" }}>*</span>\n                          )}\n                          <span>{item.label}</span>\n                        </div>\n                      ))}\n                    </InstanceListHeaderItem>\n                  )}\n                  {lanes}\n                  {!isDesigner && direction === \"vertical\" && (\n                    <Button\n                      size={\"small\"}\n                      onClick={() =>\n                        instanceDispatch({\n                          type: \"UPDATE\",\n                          data: update(cellData, {\n                            lanes: {\n                              $push: [\n                                update(cellData.lanes![0], {\n                                  cellDataList: {\n                                    $apply: (x: CellData[]) =>\n                                      x.map((y) => ({\n                                        ...y,\n                                        value: null,\n                                      })),\n                                  },\n                                  hiddenValues: {\n                                    $apply: () => ({}),\n                                  },\n                                }),\n                              ],\n                            },\n                          }),\n                        })\n                      }\n                      type={\"link\"}\n                    >\n                      Add\n                    </Button>\n                  )}\n                </>\n              }\n              label={<span>{cellData.label}</span>}\n            />\n          )}\n        </Row>\n      </>\n    );\n  }\n);\n","import React, { forwardRef } from \"react\";\nimport { Pool } from \"./Pool\";\nimport { CellData } from \"../../../schema\";\nimport { CustomCell } from \"../index\";\n\ninterface GridCellProps {\n  data: CellData;\n  direction?: \"horizontal\" | \"vertical\";\n  customCells?: CustomCell[];\n}\n\nexport const GridCell = forwardRef(\n  ({ data, direction, customCells }: GridCellProps, ref: any) => {\n    return (\n      <>\n        <Pool\n          ref={ref}\n          cellData={data}\n          direction={direction}\n          customCells={customCells}\n        />\n      </>\n    );\n  }\n);\n","import React, { forwardRef, useCallback, useContext, useState } from \"react\";\nimport { CellData, LaneData } from \"../../../schema\";\nimport { Pool } from \"../GridCell/Pool\";\nimport { CustomCell } from \"../index\";\nimport styled from \"styled-components\";\nimport { DesignerContext } from \"../../index\";\nimport update from \"immutability-helper\";\nimport { InstanceContext } from \"../../../index\";\n\ninterface TabCellProps {\n  data: CellData;\n  customCells?: CustomCell[];\n}\n\nconst Tab = styled(\"div\")`\n  display: inline-block;\n  padding: 10px 20px;\n  font-weight: bold;\n  min-width: 40px;\n  text-align: center;\n  cursor: pointer;\n`;\nconst ActiveTab = styled(Tab)`\n  border-bottom: 2px solid #1890ff;\n  color: #1890ff;\n`;\nconst Tabs = styled(\"div\")`\n  border-bottom: 1px solid #d3d3d3;\n`;\n\nexport const TabCell = forwardRef(\n  ({ data, customCells }: TabCellProps, ref: any) => {\n    const designerDispatch = useContext(DesignerContext);\n    const instanceDispatch = useContext(InstanceContext);\n    const isDesigner = instanceDispatch === null;\n    const dispatch = !isDesigner ? instanceDispatch : designerDispatch;\n    const [tabIndex, setTabIndex] = useState<number>(\n      data.lanes!.findIndex((item) => item.span === 24)\n    );\n    const handleSwitch = useCallback(\n      (index) => {\n        setTabIndex(index);\n        dispatch({\n          type: \"UPDATE\",\n          data: update(data, {\n            lanes: {\n              $apply: (x: LaneData[] | undefined): LaneData[] =>\n                (x || []).map((y) => ({\n                  ...y,\n                  span: data.lanes?.indexOf(y) === index ? 24 : 0,\n                })),\n            },\n          }),\n        });\n      },\n      [data, dispatch]\n    );\n    return (\n      <>\n        <Tabs>\n          {data.lanes?.map((lane, index) => {\n            if (index === tabIndex) {\n              return <ActiveTab>{data.tabs![index]}</ActiveTab>;\n            }\n            return (\n              <Tab onClick={() => handleSwitch(index)}>{data.tabs![index]}</Tab>\n            );\n          })}\n        </Tabs>\n        <Pool cellData={data} customCells={customCells} />\n      </>\n    );\n  }\n);\n","import React, {\n  CSSProperties,\n  forwardRef,\n  FunctionComponent,\n  useCallback,\n  useContext,\n  useMemo,\n} from \"react\";\nimport {\n  CellData,\n  CellProps as ActualCellProps,\n  SwimlaneLocation,\n} from \"../../schema\";\nimport { InputCell } from \"../../../InputCell/InputCell\";\nimport { GridCell } from \"./GridCell\";\nimport { SelectCell } from \"../../../SelectCell\";\nimport { DateCell } from \"../../../DateCell\";\nimport { InstanceContext } from \"../../index\";\nimport CheckboxCell from \"../../CheckboxCell\";\nimport { LabelCell } from \"../../../LabelCell/LabelCell\";\nimport { SwitchCell } from \"../../../SwitchCell\";\nimport { Interactions } from \"../../hooks/interactions\";\nimport { InteractContext } from \"../../util\";\nimport { TabCell } from \"./TabCell\";\nimport { DesignerContext } from \"../index\";\nimport { DispatchSetValueProps } from \"../../schema/ReducerAction\";\n\nexport interface CustomCell {\n  type: string;\n  cell: FunctionComponent<ActualCellProps>;\n  config?: FunctionComponent<{\n    data: CellData;\n    onChange: (data: CellData) => void;\n  }>;\n  icon?: JSX.Element;\n  name?: string;\n  createWidgetInstance?: () => CellData;\n}\ninterface CellProps {\n  cellData: CellData;\n  layout?: \"vertical\" | \"horizontal\";\n  style?: CSSProperties;\n  onClick?: (event: any) => void;\n  className?: string;\n  customCells?: CustomCell[];\n  children?: JSX.Element;\n  location?: SwimlaneLocation;\n}\nexport const Cell = forwardRef(\n  (\n    {\n      cellData,\n      layout = \"horizontal\",\n      style,\n      onClick,\n      className,\n      customCells,\n      children,\n      location,\n    }: CellProps,\n    ref: any\n  ) => {\n    // todo: should prevent from remove required cell\n\n    const instanceDispatch = useContext(InstanceContext);\n    const designerDispatch = useContext(DesignerContext);\n    const data = useMemo(\n      () => ({\n        required: false,\n        warnable: false,\n        layout: \"default\",\n        labeled: true,\n        ...cellData,\n      }),\n      [cellData]\n    );\n    const interactions = useContext<Interactions>(InteractContext);\n    const onChange = useCallback(\n      (value: any, valueObject: any) => {\n        const targetId =\n          location && layout === \"vertical\"\n            ? `${location.parentId}.${location.index}.${data.id}`\n            : data.id;\n        const command: DispatchSetValueProps = {\n          type: \"SET_VALUE\",\n          targetId,\n          value: value,\n        };\n        if (instanceDispatch) {\n          instanceDispatch(command);\n        } else {\n          designerDispatch(command);\n        }\n\n        const unstagedValues: any = {};\n        data.onChange?.(\n          value,\n          {\n            ...interactions,\n            /**\n             * Wrapper to replace the result of default getValue with unstaged values\n             * @param id: e.g., name, details.0.name, details.name\n             */\n            getValue(id: string): any | any[] {\n              for (const unstagedId in unstagedValues) {\n                if (!unstagedValues.hasOwnProperty(unstagedId)) {\n                  continue;\n                }\n\n                const unstagedValue = unstagedValues[unstagedId];\n\n                if (id === unstagedId) {\n                  return unstagedValue;\n                }\n\n                const unstagedIds = unstagedId.split(\".\");\n\n                if (\n                  unstagedIds.length === 3 &&\n                  id === `${unstagedIds[0]}.${unstagedIds[2]}`\n                ) {\n                  const values = interactions.getValue(id);\n                  // replace stage value with unstaged value\n                  values.splice(parseInt(unstagedIds[1]), 1, unstagedValue);\n                  return values;\n                }\n              }\n              return interactions.getValue(id);\n            },\n            /**\n             * Wrapper to save value to unstaged values\n             * @param id: e.g., name, details.0.name, details.name\n             * @param value: value of component\n             */\n            setValue(id: string, value: any): void {\n              unstagedValues[id] = value;\n              interactions.setValue(id, value);\n            },\n          },\n          valueObject,\n          location\n        );\n      },\n      [\n        data.id,\n        data.onChange,\n        designerDispatch,\n        instanceDispatch,\n        interactions,\n        layout,\n        location,\n      ]\n    );\n    const props = useMemo(\n      () => ({\n        onChange,\n        data,\n        layout,\n      }),\n      [data, layout, onChange]\n    );\n    return (\n      <>\n        <div\n          ref={ref}\n          style={{ ...style, position: \"relative\" }}\n          className={`instance ${\n            !instanceDispatch && data.active ? \" active \" : \" \"\n          }${className || \"\"}`}\n          onClick={onClick}\n        >\n          {children}\n          {data.type === \"grid\" ? (\n            <GridCell data={data} customCells={customCells} />\n          ) : data.type === \"list\" ? (\n            <GridCell\n              data={data}\n              direction={\"vertical\"}\n              customCells={customCells}\n            />\n          ) : data.type === \"tab\" ? (\n            <TabCell {...props} customCells={customCells} />\n          ) : (\n            (customCells &&\n              customCells.some((item) => item.type === data.type) &&\n              React.createElement(\n                customCells.filter((item) => item.type === data.type)[0].cell,\n                props\n              )) || (\n              <>\n                <span>{`Not found: ${data.type} of ${customCells\n                  ?.map((item) => item.type)\n                  .join(\", \")}`}</span>\n              </>\n            )\n          )}\n        </div>\n      </>\n    );\n  }\n);\n","import React, { CSSProperties, useContext, useRef, useState } from \"react\";\nimport { useDrag, useDrop, XYCoord } from \"react-dnd\";\nimport { CellData, SwimlaneLocation } from \"../schema\";\nimport { DesignerContext } from \"./index\";\nimport { createWidgetInstance } from \"./util\";\nimport { Cell, CustomCell } from \"./Cell\";\nimport { DeleteTwoTone } from \"@ant-design/icons\";\n\ninterface DnDCellProps {\n  cellData: CellData;\n  layout?: \"vertical\" | \"horizontal\";\n  index: number;\n  className?: string;\n  customCells?: CustomCell[];\n  location?: SwimlaneLocation;\n  style?: CSSProperties;\n}\n\ninterface DragItem {\n  index: number;\n  id: string;\n  type: string;\n}\n\nexport const DnDCell = function ({\n  cellData,\n  index,\n  layout = \"horizontal\",\n  className,\n  customCells,\n  location,\n  style,\n}: DnDCellProps) {\n  const data = {\n    required: false,\n    warnable: false,\n    layout: \"default\",\n    labeled: true,\n    ...cellData,\n  };\n  const ref = useRef<any>(null);\n  const designerDispatch = useContext(DesignerContext);\n  const [dropClassName, setDropClassName] = useState<\n    | \"\"\n    | \" drop-over-leftward\"\n    | \" drop-over-rightward\"\n    | \" drop-over-upward\"\n    | \" drop-over-downward\"\n  >(\"\");\n  const [{ isOver }, drop] = useDrop({\n    accept: [\n      \"instance\",\n      \"input\",\n      \"textarea\",\n      \"select\",\n      \"checkbox\",\n      \"datetime\",\n      \"grid\",\n      \"list\",\n      \"label\",\n      \"tab\",\n      ...(customCells || []).map((item) => item.type),\n    ],\n    hover: (item: DragItem, monitor) => {\n      if (\n        !ref.current ||\n        !monitor.isOver({ shallow: true }) ||\n        monitor.getItem().id === cellData.id ||\n        !monitor.getClientOffset()\n      ) {\n        setDropClassName(\"\");\n        return;\n      }\n      const hoverBoundingRect = ref.current!.getBoundingClientRect();\n      const clientOffset = monitor.getClientOffset();\n      const coord = clientOffset as XYCoord;\n      if (layout === \"horizontal\") {\n        const hoverMiddleY =\n          (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n        const hoverClientY = coord.y - hoverBoundingRect.top;\n        setDropClassName(\n          hoverClientY > hoverMiddleY\n            ? \" drop-over-downward\"\n            : \" drop-over-upward\"\n        );\n      } else {\n        const hoverMiddleX =\n          (hoverBoundingRect.right - hoverBoundingRect.left) / 2;\n        const hoverClientX = coord.x - hoverBoundingRect.left;\n        setDropClassName(\n          hoverClientX > hoverMiddleX\n            ? \" drop-over-rightward\"\n            : \" drop-over-leftward\"\n        );\n      }\n    },\n    collect: (monitor) => {\n      return {\n        isOver: monitor.isOver({ shallow: true }),\n      };\n    },\n    drop(item: DragItem, monitor) {\n      if (!ref.current) {\n        return;\n      }\n      if (!monitor.isOver({ shallow: true })) {\n        return;\n      }\n\n      let position: \"up\" | \"down\";\n      const hoverBoundingRect = ref.current!.getBoundingClientRect();\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset) {\n        return;\n      }\n      if (layout === \"horizontal\") {\n        const hoverMiddleY =\n          (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n        const hoverClientY =\n          (clientOffset as XYCoord).y - hoverBoundingRect.top;\n        position = hoverClientY > hoverMiddleY ? \"down\" : \"up\";\n      } else {\n        const hoverMiddleX =\n          (hoverBoundingRect.right - hoverBoundingRect.left) / 2;\n        const hoverClientX =\n          (clientOffset as XYCoord).x - hoverBoundingRect.left;\n        position = hoverClientX > hoverMiddleX ? \"down\" : \"up\";\n      }\n\n      if (item.type === \"instance\") {\n        designerDispatch({\n          type: \"POSITIONED_MOVE\",\n          id: monitor.getItem().id,\n          position: position,\n          dropItemId: cellData.id,\n        });\n      } else {\n        let instance: CellData | null = null;\n        if (customCells) {\n          const find = customCells.find(\n            (customCell) => customCell.type === item.type\n          );\n          if (find && find.createWidgetInstance) {\n            instance = find.createWidgetInstance();\n          }\n        }\n        if (!instance) {\n          instance = createWidgetInstance(item.type as string);\n        }\n        designerDispatch({\n          type: \"POSITIONED_ADD\",\n          position: position,\n          dropItemId: cellData.id,\n          dragItem: instance,\n        });\n      }\n    },\n  });\n  const [{ isDragging }, drag] = useDrag({\n    item: { type: \"instance\", id: cellData.id, index },\n    collect: (monitor: any) => ({\n      isDragging: !!monitor.isDragging(),\n    }),\n    begin: () => {\n      designerDispatch({\n        type: \"ACTIVE\",\n        id: cellData.id,\n      });\n    },\n  });\n  drag(drop(ref));\n\n  return (\n    <>\n      <Cell\n        location={location}\n        customCells={customCells}\n        className={`${isOver ? dropClassName : \"\"} ${className || \"\"}`}\n        onClick={(event) => {\n          event.stopPropagation();\n          designerDispatch({\n            type: \"ACTIVE\",\n            id: cellData.id,\n          });\n          designerDispatch({\n            type: \"EDIT\",\n            id: cellData.id,\n          });\n        }}\n        ref={ref}\n        style={{ opacity: isDragging ? \"0.5\" : 1, ...style }}\n        cellData={data}\n        layout={layout}\n      >\n        {data.active ? (\n          <div\n            style={{ position: \"absolute\", top: 0, right: \"4px\", zIndex: 1 }}\n          >\n            <DeleteTwoTone\n              style={{ cursor: \"pointer\" }}\n              onClick={() =>\n                designerDispatch({\n                  type: \"DELETE\",\n                  id: cellData.id,\n                })\n              }\n            />\n          </div>\n        ) : undefined}\n      </Cell>\n    </>\n  );\n};\n","import React, { useRef } from \"react\";\nimport { useDrag, useDrop, XYCoord } from \"react-dnd\";\nimport { AiOutlineMenu, AiOutlineMinusCircle } from \"react-icons/ai\";\nimport { Button, InputNumber } from \"antd\";\nimport { LaneData } from \"../../../schema\";\n\ninterface DragItem {\n  index: number;\n  type: string;\n}\n\ninterface LaneConfigProps {\n  index: number;\n  data: LaneData;\n  move: (from: number, to: number) => void;\n  onRemove: () => void;\n  onResize: (span: string | number | undefined) => void;\n}\n\nexport default function LaneConfig({\n  index,\n  data,\n  move,\n  onRemove,\n  onResize,\n}: LaneConfigProps) {\n  const ref = useRef<HTMLDivElement>(null);\n  const [, drag] = useDrag({\n    item: {\n      type: \"config\",\n      index: index,\n    },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const [, drop] = useDrop({\n    accept: \"config\",\n    hover: (item: DragItem, monitor) => {\n      if (!ref.current) {\n        return;\n      }\n      const dragIndex = item.index;\n      const hoverIndex = index;\n\n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n\n      // Determine rectangle on screen\n      const hoverBoundingRect = ref.current!.getBoundingClientRect();\n\n      // Get vertical middle\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset();\n\n      // Get pixels to the top\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top;\n\n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n\n      // Dragging downwards\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return;\n      }\n\n      // Dragging upwards\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return;\n      }\n\n      // Time to actually perform the action\n      move(dragIndex, hoverIndex);\n\n      // Note: we're mutating the monitor item here!\n      // Generally it's better to avoid mutations,\n      // but it's good here for the sake of performance\n      // to avoid expensive index searches.\n      item.index = hoverIndex;\n    },\n  });\n  drag(drop(ref));\n  return (\n    <>\n      <div ref={ref}>\n        <AiOutlineMenu style={{ cursor: \"move\" }} />\n        <InputNumber\n          onChange={onResize}\n          value={data.span}\n          size={\"small\"}\n          style={{\n            width: \"160px\",\n            margin: \"0 4px\",\n          }}\n        />\n        <Button type={\"link\"} onClick={onRemove} style={{ padding: \"0\" }}>\n          <AiOutlineMinusCircle />\n        </Button>\n      </div>\n    </>\n  );\n}\n","import React, { useContext } from \"react\";\nimport LaneConfig from \"./LaneConfig\";\nimport update from \"immutability-helper\";\nimport { Button, Form } from \"antd\";\nimport { CellData } from \"../../../schema\";\nimport { DesignerContext } from \"../../index\";\n\ninterface GridCellConfigProps {\n  data: CellData;\n}\n\nexport default function GridCellConfig({ data }: GridCellConfigProps) {\n  const designerDispatch = useContext(DesignerContext);\n  return (\n    <Form labelCol={{ span: 8 }}>\n      <Form.Item label={\"列\"}>\n        <>\n          {data &&\n            data.lanes &&\n            data.lanes.map((lane, index) => (\n              <LaneConfig\n                key={\"lane-config-\" + index}\n                index={index}\n                data={lane}\n                onResize={(span) => {\n                  const finalSpan =\n                    typeof span === \"string\" || !span ? 0 : span;\n                  designerDispatch({\n                    type: \"UPDATE\",\n                    data: {\n                      ...data,\n                      lanes: update(data.lanes, {\n                        [index]: {\n                          span: { $set: finalSpan },\n                        },\n                      }),\n                    },\n                  });\n                }}\n                onRemove={() => {\n                  designerDispatch({\n                    type: \"UPDATE\",\n                    data: {\n                      ...data,\n                      lanes: update(data.lanes, {\n                        $splice: [[index, 1]],\n                      }),\n                    },\n                  });\n                }}\n                move={(from, to) => {\n                  const dragItem = data.lanes?.[from]!;\n                  designerDispatch({\n                    type: \"UPDATE\",\n                    data: {\n                      ...data,\n                      lanes: update(data.lanes, {\n                        $splice: [\n                          [from, 1],\n                          [to, 0, dragItem],\n                        ],\n                      }),\n                    },\n                  });\n                }}\n              />\n            ))}\n          <Button\n            type={\"link\"}\n            onClick={() => {\n              const copy = { ...data };\n              copy.lanes!.push({ cellDataList: [], span: 12 });\n              designerDispatch({\n                type: \"UPDATE\",\n                data: copy,\n              });\n            }}\n          >\n            添加列\n          </Button>\n        </>\n      </Form.Item>\n    </Form>\n  );\n}\n","import React from \"react\";\nimport { WidgetData } from \"../schema\";\nimport { useDrag } from \"react-dnd\";\nimport styled from \"styled-components\";\n\ninterface WidgetProps {\n  widget: WidgetData;\n}\n\nconst StyledLi = styled.li`\n  font-size: 14px;\n  box-sizing: border-box;\n  width: 125px;\n  display: inline-block;\n  cursor: move;\n  border: 1px solid #a3a3a3;\n  padding: 5px 10px;\n  margin: 2px;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  background-color: white;\n\n  > * {\n    margin-right: 4px;\n    vertical-align: middle;\n  }\n`;\n\nexport function Widget({ widget }: WidgetProps) {\n  const [{ isDragging }, drag] = useDrag({\n    item: { type: widget.type },\n    collect: (monitor) => ({\n      isDragging: !!monitor.isDragging(),\n    }),\n  });\n\n  return (\n    <StyledLi\n      key={widget.name}\n      style={{ opacity: isDragging ? \"0.5\" : 1 }}\n      ref={drag}\n    >\n      {widget.icon}\n      <span>{widget.name}</span>\n    </StyledLi>\n  );\n}\n","import React, { Fragment } from \"react\";\nimport { Widget } from \"./Widget\";\nimport { WidgetData } from \"../schema\";\n\ninterface WidgetGroupProps {\n  name: string;\n  list: WidgetData[];\n}\n\nexport default function ({ name, list }: WidgetGroupProps) {\n  return (\n    <>\n      <Fragment key={name}>\n        <div>{name}</div>\n        <ul\n          style={{\n            width: \"100%\",\n            listStyle: \"none\",\n            padding: 0,\n          }}\n        >\n          {list.map((w: WidgetData) => {\n            return <Widget key={w.name} widget={w} />;\n          })}\n        </ul>\n      </Fragment>\n    </>\n  );\n}\n","import React, { useContext } from \"react\";\nimport { CellData } from \"../Form/schema\";\nimport { DesignerContext } from \"../Form/Designer\";\nimport { Input, Form } from \"antd\";\nimport update from \"immutability-helper\";\n\ninterface LabelCellConfigProps {\n  data: CellData;\n}\n\nexport default function LabelCellConfig({ data }: LabelCellConfigProps) {\n  const designerDispatch = useContext(DesignerContext);\n  return (\n    <>\n      <Form labelCol={{ span: 8 }}>\n        <Form.Item label={\"Title\"}>\n          <Input\n            value={data.label}\n            onChange={(event) => {\n              designerDispatch({\n                type: \"UPDATE\",\n                data: update(data, {\n                  label: { $set: event.target.value },\n                }),\n              });\n            }}\n          />\n        </Form.Item>\n      </Form>\n    </>\n  );\n}\n","import styled from \"styled-components\";\nimport { Layout } from \"antd\";\n\nconst { Header, Sider, Content } = Layout;\n\nexport const WhiteLayout = styled(Layout)`\n  background-color: white;\n`;\n\nexport const WhiteHeader = styled(Header)`\n  background-color: white;\n`;\n\nexport const WhiteSider = styled(Sider)`\n  background-color: white;\n`;\n\nexport const WhiteContent = styled(Content)`\n  background-color: white;\n`;\n","import React, { useContext } from \"react\";\nimport { CellData } from \"../schema\";\nimport { DesignerContext } from \"./index\";\nimport { Input, Switch, Form } from \"antd\";\nimport update from \"immutability-helper\";\n\ninterface SelectWrapperCellConfigProps {\n  data: CellData;\n}\n\nexport default function DefaultCellConfig({\n  data,\n}: SelectWrapperCellConfigProps) {\n  const designerDispatch = useContext(DesignerContext);\n  const innerData = { ...data };\n  innerData.label = innerData.label || \"自定义控件\";\n  return (\n    <>\n      <Form labelCol={{ span: 8 }}>\n        <Form.Item label={\"Title\"}>\n          <Input\n            value={innerData.label}\n            onChange={(event) => {\n              designerDispatch({\n                type: \"UPDATE\",\n                data: update(innerData, {\n                  label: { $set: event.target.value },\n                }),\n              });\n            }}\n          />\n        </Form.Item>\n        <Form.Item label={\"Required\"}>\n          <Switch\n            checked={!!innerData.required}\n            onChange={(checked) => {\n              designerDispatch({\n                type: \"UPDATE\",\n                data: update(innerData, {\n                  required: { $set: checked },\n                }),\n              });\n            }}\n          />\n        </Form.Item>\n        <Form.Item label={\"Readonly\"}>\n          <Switch\n            checked={innerData.disabled}\n            onChange={(checked) => {\n              designerDispatch({\n                type: \"UPDATE\",\n                data: update(innerData, {\n                  disabled: { $set: checked },\n                }),\n              });\n            }}\n          />\n        </Form.Item>\n        <Form.Item label={\"Default\"}>\n          <Input\n            value={innerData.defaultValue}\n            onChange={(event) => {\n              designerDispatch({\n                type: \"UPDATE\",\n                data: update(innerData, {\n                  defaultValue: { $set: event.target.value },\n                }),\n              });\n            }}\n          />\n        </Form.Item>\n      </Form>\n    </>\n  );\n}\n","import React, { useRef } from \"react\";\nimport { useDrag, useDrop, XYCoord } from \"react-dnd\";\nimport { AiOutlineMenu, AiOutlineMinusCircle } from \"react-icons/ai\";\nimport { Button, Input } from \"antd\";\n\ninterface DragItem {\n  index: number;\n  type: string;\n}\n\ninterface TabConfigProps {\n  index: number;\n  name: string;\n  move: (from: number, to: number) => void;\n  onRemove: () => void;\n  onRename: (tab: string) => void;\n}\n\nexport default function TabConfig({\n  index,\n  name,\n  move,\n  onRemove,\n  onRename,\n}: TabConfigProps) {\n  const ref = useRef<HTMLDivElement>(null);\n  const [, drag] = useDrag({\n    item: {\n      type: \"config\",\n      index: index,\n    },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const [, drop] = useDrop({\n    accept: \"config\",\n    hover: (item: DragItem, monitor) => {\n      if (!ref.current) {\n        return;\n      }\n      const dragIndex = item.index;\n      const hoverIndex = index;\n\n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n\n      // Determine rectangle on screen\n      const hoverBoundingRect = ref.current!.getBoundingClientRect();\n\n      // Get vertical middle\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset();\n\n      // Get pixels to the top\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top;\n\n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n\n      // Dragging downwards\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return;\n      }\n\n      // Dragging upwards\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return;\n      }\n\n      // Time to actually perform the action\n      move(dragIndex, hoverIndex);\n\n      // Note: we're mutating the monitor item here!\n      // Generally it's better to avoid mutations,\n      // but it's good here for the sake of performance\n      // to avoid expensive index searches.\n      item.index = hoverIndex;\n    },\n  });\n  drag(drop(ref));\n  return (\n    <>\n      <div ref={ref}>\n        <AiOutlineMenu style={{ cursor: \"move\" }} />\n        <Input\n          onChange={(event) => onRename(event.target.value)}\n          value={name}\n          size={\"small\"}\n          style={{\n            width: \"160px\",\n            margin: \"0 4px\",\n          }}\n        />\n        <Button type={\"link\"} onClick={onRemove} style={{ padding: \"0\" }}>\n          <AiOutlineMinusCircle />\n        </Button>\n      </div>\n    </>\n  );\n}\n","import React, { useContext } from \"react\";\nimport TabConfig from \"./TabConfig\";\nimport update from \"immutability-helper\";\nimport { Button, Form } from \"antd\";\nimport { CellData } from \"../../../../schema\";\nimport { DesignerContext } from \"../../../index\";\n\ninterface TabCellConfigProps {\n  data: CellData;\n}\n\nexport default function TabCellConfig({ data }: TabCellConfigProps) {\n  const designerDispatch = useContext(DesignerContext);\n  return (\n    <Form labelCol={{ span: 8 }}>\n      <Form.Item label={\"选项卡\"}>\n        <>\n          {data &&\n            data.tabs &&\n            data.tabs.map((tab, index) => (\n              <TabConfig\n                key={\"tab-config-\" + index}\n                index={index}\n                name={tab}\n                onRename={(name) => {\n                  designerDispatch({\n                    type: \"UPDATE\",\n                    data: {\n                      ...data,\n                      tabs: update(data.tabs, {\n                        [index]: { $set: name },\n                      }),\n                    },\n                  });\n                }}\n                onRemove={() => {\n                  designerDispatch({\n                    type: \"UPDATE\",\n                    data: {\n                      ...data,\n                      tabs: update(data.tabs, {\n                        $splice: [[index, 1]],\n                      }),\n                      lanes: update(data.lanes, {\n                        $splice: [[index, 1]],\n                      }),\n                    },\n                  });\n                }}\n                move={(from, to) => {\n                  const dragItem = data.tabs![from]!;\n                  designerDispatch({\n                    type: \"UPDATE\",\n                    data: {\n                      ...data,\n                      tabs: update(data.tabs, {\n                        $splice: [\n                          [from, 1],\n                          [to, 0, dragItem],\n                        ],\n                      }),\n                      lanes: update(data.lanes, {\n                        $splice: [\n                          [from, 1],\n                          [to, 0, data.lanes![from]],\n                        ],\n                      }),\n                    },\n                  });\n                }}\n              />\n            ))}\n          <Button\n            type={\"link\"}\n            onClick={() => {\n              const copy = { ...data };\n              copy.lanes!.push({ cellDataList: [], span: 0 });\n              copy.tabs?.push(\"新选项卡\");\n              designerDispatch({\n                type: \"UPDATE\",\n                data: copy,\n              });\n            }}\n          >\n            添加列\n          </Button>\n        </>\n      </Form.Item>\n    </Form>\n  );\n}\n","import React, {\n  CSSProperties,\n  Dispatch,\n  forwardRef,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useMemo,\n  useReducer,\n  useRef,\n  useState,\n} from \"react\";\nimport { Button, Modal, Space } from \"antd\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { clone, cloneAndForEach, getActive, reducer } from \"./util\";\nimport { CellData } from \"../schema\";\nimport { WidgetGroups } from \"../constants/WidgetGroups\";\nimport { DnDCell } from \"./DnDCell\";\nimport GridCellConfig from \"./Cell/GridCellConfig\";\nimport styled from \"styled-components\";\nimport DateCellConfig from \"../../DateCell/DateCellConfig\";\nimport SelectCellConfig from \"../../SelectCell/SelectCellConfig\";\nimport WidgetGroup from \"./WidgetGroup\";\nimport CheckboxCellConfig from \"../CheckboxCell/CheckboxCellConfig\";\nimport LabelCellConfig from \"../../LabelCell/LabelCellConfig\";\nimport { CustomCell } from \"./Cell\";\nimport { AiOutlineEdit } from \"react-icons/all\";\nimport { WhiteContent, WhiteHeader, WhiteLayout, WhiteSider } from \"../Layout\";\nimport DefaultCellConfig from \"./DefaultCellConfig\";\nimport { CellDataType, ReducerActionProps } from \"../type\";\nimport useInteractions from \"../hooks/interactions\";\nimport Form from \"../index\";\nimport { InteractContext } from \"../util\";\nimport TabCellConfig from \"./Cell/TabCell/TabCellConfig\";\nimport \"./index.css\";\n\nconst rootCellData: CellData = {\n  type: \"grid\",\n  id: \"11270307\",\n  lanes: [{ span: 24, cellDataList: [] }],\n  active: false,\n};\n\nexport const DesignerContext = React.createContext<\n  Dispatch<ReducerActionProps>\n>({} as Dispatch<ReducerActionProps>);\nconst LeftSider = styled(WhiteSider).attrs({\n  width: 280,\n})`\n  padding: 10px;\n  border-right: 1px solid #d3d3d3;\n`;\nconst FullHeightBorderedLayout = styled(WhiteLayout)`\n  border: 1px solid #d3d3d3;\n  height: calc(100% - 1px);\n`;\nconst ToolBar = styled(WhiteHeader)`\n  padding: 0 10px;\n  text-align: right;\n  border-bottom: 1px solid #a3a3a3;\n`;\n\ninterface DesignerProps {\n  customCells?: CustomCell[];\n  availableCustomCells?: CustomCell[];\n  toolbar?: boolean;\n  style?: CSSProperties;\n  defaultCellData?: CellData;\n  builtinCellDataTypes?: CellDataType[];\n  onChange?: (root: CellData) => void;\n}\n\nexport const Designer = forwardRef(\n  (\n    {\n      customCells,\n      availableCustomCells,\n      toolbar = true,\n      defaultCellData,\n      builtinCellDataTypes,\n      onChange,\n      style,\n    }: DesignerProps,\n    ref\n  ) => {\n    const [data, designerDispatch] = useReducer(\n      reducer,\n      defaultCellData || rootCellData\n    );\n    const [previewDialogVisible, setPreviewDialogVisible] = useState(false);\n    const [previewData, setPreviewData] = useState<CellData | null>(null);\n    const previewRef = useRef<any>();\n    const delFunction = useCallback((event) => {\n      if (event.keyCode === 46 || (event.ctrlKey && event.keyCode === 8)) {\n        designerDispatch({ type: \"DELETE_ACTIVE\" });\n      }\n    }, []);\n    const finalAvailableCells = useMemo(() => {\n      return availableCustomCells || customCells;\n    }, [availableCustomCells, customCells]);\n    useEffect(() => {\n      document.addEventListener(\"keyup\", delFunction, false);\n      return () => document.removeEventListener(\"keyup\", delFunction, false);\n    }, [delFunction]);\n    useEffect(() => onChange?.(data), [data, onChange]);\n    useImperativeHandle(ref, () => ({\n      preview() {\n        setPreviewDialogVisible(true);\n        setPreviewData(clone(data));\n      },\n      reset() {\n        designerDispatch({\n          type: \"INIT\",\n          data: rootCellData,\n        });\n      },\n      load(data: CellData) {\n        designerDispatch({\n          type: \"INIT\",\n          data: data,\n        });\n      },\n      get() {\n        return cloneAndForEach(data, (item) => (item.value = undefined));\n      },\n    }));\n    const active = getActive(data);\n    const interactions = useInteractions(designerDispatch, data);\n    const widgetGroups = useMemo(() => {\n      if (!builtinCellDataTypes) {\n        return WidgetGroups;\n      }\n      return WidgetGroups.map((group) => ({\n        name: group.name,\n        widgets: group.widgets.filter(\n          (widget) =>\n            builtinCellDataTypes.indexOf(widget.type as CellDataType) > -1\n        ),\n      })).filter((group) => group.widgets.length > 0);\n    }, [builtinCellDataTypes]);\n\n    return (\n      <>\n        <DesignerContext.Provider value={designerDispatch}>\n          <InteractContext.Provider value={interactions}>\n            <DndProvider backend={HTML5Backend}>\n              <FullHeightBorderedLayout style={style}>\n                <LeftSider>\n                  {widgetGroups.map((g) => (\n                    <WidgetGroup key={g.name} name={g.name} list={g.widgets} />\n                  ))}\n                  {finalAvailableCells && (\n                    <WidgetGroup\n                      key={\"Custom\"}\n                      name={\"Custom\"}\n                      list={[\n                        ...finalAvailableCells.map((cell) => ({\n                          type: cell.type,\n                          name: cell.name || \"Custom\",\n                          icon: cell.icon || <AiOutlineEdit />,\n                        })),\n                      ]}\n                    />\n                  )}\n                </LeftSider>\n                <WhiteContent>\n                  <WhiteLayout style={{ height: \"100%\" }}>\n                    {toolbar && (\n                      <ToolBar>\n                        <Space>\n                          <Button\n                            onClick={() => {\n                              designerDispatch({\n                                type: \"INIT\",\n                                data: rootCellData,\n                              });\n                            }}\n                          >\n                            Reset\n                          </Button>\n                          <Button\n                            onClick={() => {\n                              setPreviewDialogVisible(true);\n                              setPreviewData(clone(data));\n                            }}\n                          >\n                            Preview\n                          </Button>\n                          <Button onClick={() => alert(JSON.stringify(data))}>\n                            Save\n                          </Button>\n                        </Space>\n                      </ToolBar>\n                    )}\n\n                    <WhiteContent style={{ height: \"100%\", padding: 10 }}>\n                      <DnDCell\n                        className={\"root\"}\n                        cellData={data}\n                        index={0}\n                        customCells={customCells}\n                      />\n                    </WhiteContent>\n                  </WhiteLayout>\n                </WhiteContent>\n                <WhiteSider\n                  width={280}\n                  style={{ padding: 10, borderLeft: \"1px solid #d3d3d3\" }}\n                >\n                  {active ? (\n                    active.type === \"grid\" ? (\n                      <GridCellConfig data={active} />\n                    ) : active.type === \"tab\" ? (\n                      <TabCellConfig data={active} />\n                    ) : active.type === \"label\" ? (\n                      <LabelCellConfig data={active} />\n                    ) : (\n                      (customCells &&\n                        customCells.some((item) => item.type === active.type) &&\n                        customCells.filter(\n                          (item) => item.type === active.type\n                        )[0].config &&\n                        React.createElement(\n                          customCells.filter(\n                            (item) => item.type === active.type\n                          )[0].config!,\n                          {\n                            data: active,\n                            onChange: function (data: CellData) {\n                              designerDispatch({\n                                type: \"UPDATE\",\n                                data: data,\n                              });\n                            },\n                          }\n                        )) || <DefaultCellConfig data={active} />\n                    )\n                  ) : (\n                    <></>\n                  )}\n                </WhiteSider>\n              </FullHeightBorderedLayout>\n            </DndProvider>\n          </InteractContext.Provider>\n        </DesignerContext.Provider>\n        <Modal\n          width={1000}\n          title={\"Preview\"}\n          visible={previewDialogVisible}\n          onCancel={() => setPreviewDialogVisible(false)}\n          footer={[\n            <Button\n              onClick={() => {\n                const result = previewRef.current!.getData();\n                alert(JSON.stringify(result));\n              }}\n            >\n              Save\n            </Button>,\n            <Button onClick={() => previewRef.current.validate()}>\n              Validate\n            </Button>,\n          ]}\n        >\n          {previewData && (\n            <Form\n              customCells={customCells}\n              ref={previewRef}\n              data={cloneAndForEach(previewData, (data) => {\n                data.value = data.defaultValue || data.value;\n              })}\n              key={previewData.id}\n            />\n          )}\n        </Modal>\n      </>\n    );\n  }\n);\n","import React, { useRef } from \"react\";\nimport { useDrag, useDrop, XYCoord } from \"react-dnd\";\nimport { AiOutlineMenu, AiOutlineMinusCircle } from \"react-icons/ai\";\nimport { Button, Input } from \"antd\";\n\ninterface DragItem {\n  index: number;\n  type: string;\n}\n\ninterface OptionConfigProps {\n  index: number;\n  data: string;\n  move: (from: number, to: number) => void;\n  onRemove: () => void;\n  onChange: (data: string) => void;\n}\n\nexport default function OptionConfig({\n  index,\n  data,\n  move,\n  onRemove,\n  onChange,\n}: OptionConfigProps) {\n  const ref = useRef<HTMLDivElement>(null);\n  const [, drag] = useDrag({\n    item: {\n      type: \"config\",\n      index: index,\n    },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const [, drop] = useDrop({\n    accept: \"config\",\n    hover: (item: DragItem, monitor) => {\n      if (!ref.current) {\n        return;\n      }\n      const dragIndex = item.index;\n      const hoverIndex = index;\n\n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n\n      // Determine rectangle on screen\n      const hoverBoundingRect = ref.current!.getBoundingClientRect();\n\n      // Get vertical middle\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset();\n\n      // Get pixels to the top\n      const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top;\n\n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n\n      // Dragging downwards\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return;\n      }\n\n      // Dragging upwards\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return;\n      }\n\n      // Time to actually perform the action\n      move(dragIndex, hoverIndex);\n\n      // Note: we're mutating the monitor item here!\n      // Generally it's better to avoid mutations,\n      // but it's good here for the sake of performance\n      // to avoid expensive index searches.\n      item.index = hoverIndex;\n    },\n  });\n  drag(drop(ref));\n  return (\n    <>\n      <div ref={ref}>\n        <AiOutlineMenu style={{ cursor: \"move\" }} />\n        <Input\n          onChange={(event) => {\n            onChange(event.target.value);\n          }}\n          value={data}\n          size={\"small\"}\n          style={{\n            width: \"120px\",\n            margin: \"0 4px\",\n          }}\n        />\n        <Button type={\"link\"} onClick={onRemove} style={{ padding: \"0\" }}>\n          <AiOutlineMinusCircle />\n        </Button>\n      </div>\n    </>\n  );\n}\n","import React, { useContext } from \"react\";\nimport { CellData } from \"../../Form/schema\";\nimport { DesignerContext } from \"../../Form/Designer\";\nimport { Input, Switch, Form, Button } from \"antd\";\nimport update from \"immutability-helper\";\nimport OptionConfig from \"./OptionConfig\";\n\ninterface SelectCellConfigProps {\n  data: CellData;\n}\n\nexport default function SelectCellConfig({ data }: SelectCellConfigProps) {\n  const designerDispatch = useContext(DesignerContext);\n  return (\n    <>\n      <Form labelCol={{ span: 8 }}>\n        <Form.Item label={\"Title\"}>\n          <Input\n            value={data.label}\n            onChange={(event) => {\n              designerDispatch({\n                type: \"UPDATE\",\n                data: update(data, {\n                  label: { $set: event.target.value },\n                }),\n              });\n            }}\n          />\n        </Form.Item>\n        <Form.Item label={\"Required\"}>\n          <Switch\n            checked={!!data.required}\n            onChange={(checked) => {\n              designerDispatch({\n                type: \"UPDATE\",\n                data: update(data, {\n                  required: { $set: checked },\n                }),\n              });\n            }}\n          />\n        </Form.Item>\n        <Form.Item label={\"Readonly\"}>\n          <Switch\n            checked={data.disabled}\n            onChange={(checked) => {\n              designerDispatch({\n                type: \"UPDATE\",\n                data: update(data, {\n                  disabled: { $set: checked },\n                }),\n              });\n            }}\n          />\n        </Form.Item>\n        <Form.Item label={\"Options\"}>\n          <>\n            {data &&\n              data.options &&\n              data.options.map((option, index) => (\n                <OptionConfig\n                  key={\"option-config-\" + index}\n                  index={index}\n                  data={option.label}\n                  onChange={(label) => {\n                    designerDispatch({\n                      type: \"UPDATE\",\n                      data: {\n                        ...data,\n                        options: update(data.options, {\n                          [index]: {\n                            label: { $set: label || \"\" },\n                          },\n                        }),\n                      },\n                    });\n                  }}\n                  onRemove={() => {\n                    designerDispatch({\n                      type: \"UPDATE\",\n                      data: {\n                        ...data,\n                        options: update(data.options, {\n                          $splice: [[index, 1]],\n                        }),\n                      },\n                    });\n                  }}\n                  move={(from, to) => {\n                    const dragItem = data.options?.[from]!;\n                    designerDispatch({\n                      type: \"UPDATE\",\n                      data: {\n                        ...data,\n                        options: update(data.options, {\n                          $splice: [\n                            [from, 1],\n                            [to, 0, dragItem],\n                          ],\n                        }),\n                      },\n                    });\n                  }}\n                />\n              ))}\n            <Button\n              type={\"link\"}\n              onClick={() => {\n                const copy = { ...data };\n                copy.options!.push({ label: \"New Item\", value: +new Date() });\n                designerDispatch({\n                  type: \"UPDATE\",\n                  data: copy,\n                });\n              }}\n            >\n              Add\n            </Button>\n          </>\n        </Form.Item>\n      </Form>\n    </>\n  );\n}\n","import React, { forwardRef } from \"react\";\nimport { Select } from \"antd\";\nimport { FormGroup } from \"../Form/Designer/FormGroup\";\nimport { CellProps } from \"../Form/schema\";\n\nconst { Option } = Select;\n\nexport const SelectCell = forwardRef(\n  ({ data, layout, onChange }: CellProps, ref: any) => {\n    return (\n      <>\n        <FormGroup\n          ref={ref}\n          required={!!data.required!}\n          warning={data.warning}\n          layout={layout}\n          warnable={data.warnable!}\n          label={\n            data.labeled ? (\n              <label title={data.label}>{data.label}</label>\n            ) : (\n              <></>\n            )\n          }\n          element={\n            <Select\n              placeholder={data.placeholder}\n              disabled={data.disabled}\n              style={{ width: \"100%\" }}\n              onChange={(value) => onChange(value)}\n            >\n              {data.options?.map((option) => (\n                <Option key={option.value} value={option.value}>\n                  {option.label}\n                </Option>\n              ))}\n            </Select>\n          }\n        />\n      </>\n    );\n  }\n);\n","import React, { useContext, useState } from \"react\";\nimport { CellData } from \"../Form/schema\";\nimport { DesignerContext } from \"../Form/Designer\";\nimport { Input, Switch, Form, AutoComplete, Typography } from \"antd\";\nimport update from \"immutability-helper\";\n\nconst { Text } = Typography;\n\ninterface DateCellConfigProps {\n  data: CellData;\n}\n\nexport default function DateCellConfig({ data }: DateCellConfigProps) {\n  const defaultValueOptions = [\n    {\n      label: (\n        <>\n          <Text>now: </Text>\n          <Text type={\"secondary\"}>当前时间</Text>\n        </>\n      ),\n      text: \"now\",\n      value: \"now\",\n    },\n  ];\n  const [currentDefaultValueOptions, setCurrentDefaultValueOptions] = useState(\n    defaultValueOptions\n  );\n  const designerDispatch = useContext(DesignerContext);\n  return (\n    <>\n      <Form labelCol={{ span: 8 }}>\n        <Form.Item label={\"Title\"}>\n          <Input\n            value={data.label}\n            onChange={(event) => {\n              designerDispatch({\n                type: \"UPDATE\",\n                data: update(data, {\n                  label: { $set: event.target.value },\n                }),\n              });\n            }}\n          />\n        </Form.Item>\n        <Form.Item label={\"Required\"}>\n          <Switch\n            checked={!!data.required}\n            onChange={(checked) => {\n              designerDispatch({\n                type: \"UPDATE\",\n                data: update(data, {\n                  required: { $set: checked },\n                }),\n              });\n            }}\n          />\n        </Form.Item>\n        <Form.Item label={\"Readonly\"}>\n          <Switch\n            checked={data.disabled}\n            onChange={(checked) => {\n              designerDispatch({\n                type: \"UPDATE\",\n                data: update(data, {\n                  disabled: { $set: checked },\n                }),\n              });\n            }}\n          />\n        </Form.Item>\n        <Form.Item label={\"Default\"}>\n          <AutoComplete\n            onSearch={(searchText) => {\n              setCurrentDefaultValueOptions(\n                defaultValueOptions.filter(\n                  (item) => item.text.search(new RegExp(searchText, \"i\")) > -1\n                )\n              );\n            }}\n          >\n            {currentDefaultValueOptions.map((option) => (\n              <AutoComplete.Option value={option.value} key={option.value}>\n                {option.label}\n              </AutoComplete.Option>\n            ))}\n          </AutoComplete>\n        </Form.Item>\n      </Form>\n    </>\n  );\n}\n","import React, { forwardRef } from \"react\";\nimport { DatePicker } from \"antd\";\nimport { FormGroup } from \"../Form/Designer/FormGroup\";\nimport { CellProps } from \"../Form/schema\";\nimport moment from \"moment\";\n\nexport const DateCell = forwardRef(\n  ({ data, layout, onChange }: CellProps, ref: any) => (\n    <>\n      <FormGroup\n        ref={ref}\n        required={!!data.required}\n        warning={data.warning}\n        layout={layout}\n        warnable={data.warnable!}\n        label={\n          data.labeled ? <label title={data.label}>{data.label}</label> : <></>\n        }\n        element={\n          <DatePicker\n            style={{ width: \"100%\" }}\n            disabled={data.disabled}\n            value={data.value ? moment(data.value) : null}\n            placeholder={data.placeholder}\n            onChange={(date) =>\n              onChange(date ? date.format(\"YYYY-MM-DD HH:mm:ss\") : null)\n            }\n          />\n        }\n      />\n    </>\n  )\n);\n","import React, { useContext } from \"react\";\nimport { CellData } from \"../schema\";\nimport { DesignerContext } from \"../Designer\";\nimport { Input, Switch, Form, Button } from \"antd\";\nimport update from \"immutability-helper\";\nimport OptionConfig from \"../../SelectCell/SelectCellConfig/OptionConfig\";\n\ninterface CheckboxCellConfigProps {\n  data: CellData;\n}\n\nexport default function CheckboxCellConfig({ data }: CheckboxCellConfigProps) {\n  const designerDispatch = useContext(DesignerContext);\n  return (\n    <>\n      <Form labelCol={{ span: 8 }}>\n        <Form.Item label={\"Title\"}>\n          <Input\n            value={data.label}\n            onChange={(event) => {\n              designerDispatch({\n                type: \"UPDATE\",\n                data: update(data, {\n                  label: { $set: event.target.value },\n                }),\n              });\n            }}\n          />\n        </Form.Item>\n        <Form.Item label={\"Required\"}>\n          <Switch\n            checked={!!data.required}\n            onChange={(checked) => {\n              designerDispatch({\n                type: \"UPDATE\",\n                data: update(data, {\n                  required: { $set: checked },\n                }),\n              });\n            }}\n          />\n        </Form.Item>\n        <Form.Item label={\"Readonly\"}>\n          <Switch\n            checked={data.disabled}\n            onChange={(checked) => {\n              designerDispatch({\n                type: \"UPDATE\",\n                data: update(data, {\n                  disabled: { $set: checked },\n                }),\n              });\n            }}\n          />\n        </Form.Item>\n        <Form.Item label={\"选项\"}>\n          <>\n            {data &&\n              data.options &&\n              data.options.map((option, index) => (\n                <OptionConfig\n                  key={\"option-config-\" + index}\n                  index={index}\n                  data={option.label}\n                  onChange={(label) => {\n                    designerDispatch({\n                      type: \"UPDATE\",\n                      data: {\n                        ...data,\n                        options: update(data.options, {\n                          [index]: {\n                            label: { $set: label || \"\" },\n                          },\n                        }),\n                      },\n                    });\n                  }}\n                  onRemove={() => {\n                    designerDispatch({\n                      type: \"UPDATE\",\n                      data: {\n                        ...data,\n                        options: update(data.options, {\n                          $splice: [[index, 1]],\n                        }),\n                      },\n                    });\n                  }}\n                  move={(from, to) => {\n                    const dragItem = data.options?.[from]!;\n                    designerDispatch({\n                      type: \"UPDATE\",\n                      data: {\n                        ...data,\n                        options: update(data.options, {\n                          $splice: [\n                            [from, 1],\n                            [to, 0, dragItem],\n                          ],\n                        }),\n                      },\n                    });\n                  }}\n                />\n              ))}\n            <Button\n              type={\"link\"}\n              onClick={() => {\n                const copy = { ...data };\n                copy.options!.push({ label: \"新选项\", value: +new Date() });\n                designerDispatch({\n                  type: \"UPDATE\",\n                  data: copy,\n                });\n              }}\n            >\n              添加列\n            </Button>\n          </>\n        </Form.Item>\n      </Form>\n    </>\n  );\n}\n","import React from \"react\";\nimport { CellProps } from \"../schema\";\nimport { FormGroup } from \"../Designer/FormGroup\";\nimport { Checkbox } from \"antd\";\n\nexport default function ({ data, layout, onChange }: CellProps) {\n  return (\n    <>\n      <FormGroup\n        layout={layout}\n        required={!!data.required}\n        warnable={data.warnable}\n        label={<label>{data.label}</label>}\n        element={\n          <>\n            <Checkbox.Group\n              options={data.options}\n              onChange={(checkedValues) => onChange(checkedValues)}\n            />\n          </>\n        }\n      />\n    </>\n  );\n}\n","import React, { forwardRef } from \"react\";\nimport { Switch } from \"antd\";\nimport { CellProps } from \"../Form/schema\";\nimport { FormGroup } from \"../Form/Designer/FormGroup\";\n\nexport const SwitchCell = forwardRef(\n  ({ data, layout, onChange }: CellProps, ref: any) => (\n    <>\n      <FormGroup\n        ref={ref}\n        required={typeof data.required === \"function\" ? true : data.required}\n        warning={data.warning}\n        layout={layout}\n        warnable={data.warnable!}\n        label={\n          data.labeled ? <label title={data.label}>{data.label}</label> : <></>\n        }\n        element={\n          <Switch\n            checked={data.value}\n            onChange={(checked) => onChange(checked)}\n            disabled={data.disabled}\n          />\n        }\n      />\n    </>\n  )\n);\n","import React, { forwardRef } from \"react\";\nimport { CellProps } from \"../Form/schema\";\n\nexport const LabelCell = forwardRef(({ data }: CellProps, ref: any) => (\n  <div style={{ height: 42, padding: \"0 10px\" }} ref={ref}>\n    <label style={{ lineHeight: \"42px\" }} title={data.label}>\n      {data.label || \" \"}\n    </label>\n  </div>\n));\n","import React, { forwardRef } from \"react\";\nimport { Input } from \"antd\";\nimport { CellProps } from \"../Form/schema\";\nimport { FormGroup } from \"../Form/Designer/FormGroup\";\n\nexport const InputCell = forwardRef(\n  ({ data, layout, onChange }: CellProps, ref: any) => {\n    return (\n      <>\n        <FormGroup\n          ref={ref}\n          required={typeof data.required === \"function\" ? true : data.required}\n          warning={data.warning}\n          layout={layout}\n          warnable={data.warnable!}\n          label={\n            data.labeled ? (\n              <label title={data.label}>{data.label}</label>\n            ) : (\n              <></>\n            )\n          }\n          element={\n            <Input\n              disabled={data.disabled}\n              value={data.value}\n              placeholder={data.placeholder}\n              onChange={(event) => {\n                onChange(event.target.value);\n              }}\n            />\n          }\n        />\n      </>\n    );\n  }\n);\n","import React, { useMemo } from \"react\";\nimport \"./App.css\";\nimport { Designer } from \"./components/Form/Designer\";\nimport SelectCellConfig from \"./components/SelectCell/SelectCellConfig\";\nimport { SelectCell } from \"./components/SelectCell\";\nimport { CellData } from \"./components/Form/schema\";\nimport { CustomCell } from \"./components/Form/Designer/Cell\";\nimport DateCellConfig from \"./components/DateCell/DateCellConfig\";\nimport { DateCell } from \"./components/DateCell\";\nimport CheckboxCellConfig from \"./components/Form/CheckboxCell/CheckboxCellConfig\";\nimport CheckboxCell from \"./components/Form/CheckboxCell\";\nimport { SwitchCell } from \"./components/SwitchCell\";\nimport { LabelCell } from \"./components/LabelCell/LabelCell\";\nimport LabelCellConfig from \"./components/LabelCell/LabelCellConfig\";\nimport { InputCell } from \"./components/InputCell/InputCell\";\n\nfunction App() {\n  const customCells = useMemo(\n    (): CustomCell[] => [\n      {\n        name: \"Select\",\n        type: \"select\",\n        config: SelectCellConfig,\n        cell: SelectCell,\n        createWidgetInstance() {\n          let cellData: CellData = {\n            type: \"select\",\n            id: `select${new Date().getTime()}`,\n            active: false,\n          };\n          cellData.label = \"Select\";\n          cellData.placeholder = \"Select...\";\n          cellData.options = [];\n          cellData.required = false;\n          return cellData;\n        },\n      },\n      {\n        name: \"Datepicker\",\n        type: \"datetime\",\n        config: DateCellConfig,\n        cell: DateCell,\n        createWidgetInstance() {\n          let cellData: CellData = {\n            type: \"datetime\",\n            id: `datetime${new Date().getTime()}`,\n            active: false,\n          };\n          cellData.label = \"Date\";\n          cellData.placeholder = \"Select...\";\n          cellData.required = false;\n          return cellData;\n        },\n      },\n      {\n        name: \"Checkbox\",\n        type: \"checkbox\",\n        config: CheckboxCellConfig,\n        cell: CheckboxCell,\n        createWidgetInstance() {\n          let cellData: CellData = {\n            type: \"checkbox\",\n            id: `checkbox${new Date().getTime()}`,\n            active: false,\n          };\n          cellData.label = \"Checkbox\";\n          cellData.options = [];\n          cellData.required = false;\n          return cellData;\n        },\n      },\n      {\n        name: \"Switch\",\n        type: \"switch\",\n        cell: SwitchCell,\n        createWidgetInstance() {\n          let cellData: CellData = {\n            type: \"switch\",\n            id: `switch${new Date().getTime()}`,\n            active: false,\n            label: \"Switch\",\n          };\n          return cellData;\n        },\n      },\n      {\n        name: \"Label\",\n        type: \"label\",\n        cell: LabelCell,\n        config: LabelCellConfig,\n        createWidgetInstance() {\n          let cellData: CellData = {\n            type: \"label\",\n            id: `label${new Date().getTime()}`,\n            active: false,\n            label: \"Label\",\n          };\n          return cellData;\n        },\n      },\n      {\n        name: \"Input\",\n        type: \"input\",\n        cell: InputCell,\n        createWidgetInstance() {\n          let cellData: CellData = {\n            type: \"input\",\n            id: `input${new Date().getTime()}`,\n            active: false,\n          };\n          cellData.label = \"Input\";\n          cellData.placeholder = \"Input...\";\n          cellData.required = false;\n          return cellData;\n        },\n      },\n    ],\n    []\n  );\n  return <Designer customCells={customCells} />;\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}